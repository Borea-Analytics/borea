{"version":3,"sources":["lz-string.js","../package.json","config.js","utils.js","autocapture-utils.js","extensions/rageclick.js","autocapture.js","storage.js","gdpr-utils.js","api-actions.js","posthog-people.js","posthog-featureflags.js","posthog-persistence.js","extensions/sessionid.js","extensions/sessionrecording.js","extensions/toolbar.js","request-queue.js","capture-metrics.js","../node_modules/fflate/esm/browser.js","compression.js","send-request.js","posthog-core.js","loader-globals.js","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["f","String","fromCharCode","keyStrBase64","keyStrUriSafe","baseReverseDic","getBaseValue","alphabet","character","i","length","charAt","LZString","compressToBase64","input","res","_compress","a","decompressFromBase64","_decompress","index","compressToUTF16","decompressFromUTF16","compressed","charCodeAt","compressToUint8Array","uncompressed","compress","buf","Uint8Array","TotalLen","current_value","decompressFromUint8Array","undefined","decompress","Array","result","forEach","c","push","join","compressToEncodedURIComponent","decompressFromEncodedURIComponent","replace","bitsPerChar","getCharFromInt","value","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","ii","Object","prototype","hasOwnProperty","call","Math","pow","resetValue","getNextValue","dictionary","enlargeIn","dictSize","numBits","entry","w","bits","resb","maxpower","power","data","val","position","module","exports","Config","DEBUG","LIB_VERSION","version","ArrayProto","FuncProto","Function","ObjProto","slice","toString","win","window","navigator","userAgent","document","nativeBind","bind","nativeForEach","nativeIndexOf","indexOf","nativeIsArray","isArray","breaker","_","trim","str","console","log","isUndefined","apply","arguments","err","each","arg","error","args","critical","func","context","bound","isFunction","TypeError","concat","ctor","self","bind_instance_methods","obj","iterator","l","key","extend","source","prop","test","x","include","target","found","includes","needle","isObject","isEmptyObject","isString","isDate","isNumber","encodeDates","v","k","formatDate","timestamp","Date","now","d","pad","n","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","safewrap","e","safewrap_class","klass","functions","safewrap_instance_methods","strip_empty_properties","p","ret","COPY_IN_PROGRESS_ATTRIBUTE","Symbol","deepCircularCopy","customizer","it","copyAndTruncateStrings","object","maxStringLength","base64Encode","b64","o1","o2","o3","h1","h2","h3","h4","ac","enc","tmp_arr","utf8Encode","string","utftext","start","end","stringl","c1","substring","UUID","T","R","random","UA","ua","ch","buffer","xor","byte_array","j","tmp","unshift","se","screen","height","width","isBlockedUA","HTTPBuildQuery","formdata","arg_separator","use_val","use_key","tph_arr","encodeURIComponent","getQueryParam","url","param","regexS","regex","RegExp","results","exec","decodeURIComponent","getHashParam","hash","matches","match","register_event","element","type","handler","oldSchool","useCapture","addEventListener","ontype","old_handler","makeHandler","new_handler","old_handlers","event","fixEvent","old_result","new_result","preventDefault","stopPropagation","returnValue","cancelBubble","info","campaignParams","campaign_keywords","split","kw","params","kwkey","URL","searchEngine","referrer","search","searchInfo","keyword","browser","user_agent","vendor","opera","browserVersion","versionRegexs","Chrome","Safari","Opera","Firefox","Konqueror","BlackBerry","Mozilla","parseFloat","os","device","referringDomain","properties","$os","$browser","$device","$current_url","location","href","$host","host","$pathname","pathname","$browser_version","$screen_height","$screen_width","$lib","$lib_version","$insert_id","$time","people_properties","getClassName","el","className","baseVal","getAttribute","getSafeText","elText","shouldCaptureElement","isSensitiveElement","childNodes","child","isTextNode","textContent","filter","shouldCaptureValue","isElementNode","nodeType","isTag","tag","tagName","toLowerCase","usefulElements","shouldCaptureDomEvent","parentIsUsefulElement","targetElementList","parentNode","curEl","compStyles","getComputedStyle","getPropertyValue","classes","name","id","sensitiveNameRegex","ccRegex","ssnRegex","loadScript","scriptUrlToLoad","callback","scriptTag","createElement","src","onload","scripts","getElementsByTagName","insertBefore","body","appendChild","RAGE_CLICK_THRESHOLD_PX","RAGE_CLICK_TIMEOUT_MS","RAGE_CLICK_CLICK_COUNT","RageClick","instance","enabled","get_config","clicks","y","lastClick","abs","capture","autocapture","_initializedTokens","_previousElementSibling","previousElementSibling","previousSibling","_getPropertiesFromElement","elem","tag_name","props","attributes","attr","nthChild","nthOfType","currentElem","_getDefaultProperties","eventType","$event_type","$ce_version","_extractCustomPropertyValue","customProperty","propValues","querySelectorAll","matchedElem","_getCustomProperties","_customProperties","eventSelector","eventElements","eventElement","_getEventTarget","srcElement","shadowRoot","composedPath","_captureEvent","rageclicks","click","clientX","clientY","getTime","elementsJson","explicitNoCapture","shouldCaptureEl","$elements","_navigate","_addDomEventHandlers","init","toolbar","maybeLoadEditor","token","parseDecideResponse","response","setTimeout","afterDecideResponse","sessionRecording","persistence","register","$active_feature_flags","unregister","compression","method","json_data","JSON","stringify","distinct_id","get_distinct_id","encoded_data","_send_request","_prepare_callback","enabledForProject","numBuckets","numEnabledBuckets","charCodeSum","isBrowserSupported","DOMAIN_MATCH_REGEX","cookieStore","get","nameEQ","ca","cookie","parse","set","days","cross_subdomain","is_secure","cdomain","expires","secure","hostname","domain","date","setTime","toGMTString","new_cookie_val","remove","_localStorage_supported","localStore","is_supported","supported","msg","localStorage","getItem","setItem","removeItem","memoryStorage","memoryStore","GDPR_DEFAULT_PERSISTENCE_PREFIX","optIn","options","_optInOut","optOut","hasOptedIn","_getStorageValue","hasOptedOut","_hasDoNotTrackFlagOn","addOptOutCheckPostHogLib","silenceErrors","_addOptOutCheck","addOptOutCheckPostHogPeople","_get_config","clearOptInOut","_getStorage","_getStorageKey","crossSubdomainCookie","cookieDomain","persistenceType","persistencePrefix","respectDnt","nav","hasDntOn","dntValue","optValue","cookieExpiration","secureCookie","crossSiteCookie","captureEventName","captureProperties","send_immediately","getConfigValue","optedOut","SET_ACTION","SET_ONCE_ACTION","apiActions","set_action","to","$set","_is_reserved_property","set_once_action","$set_once","PostHogPeople","_init","posthog_instance","_posthog","update_referrer_info","get_referrer_info","set_once","device_id","get_property","user_id","had_persisted_distinct_id","date_encoded_data","truncated_data","conf_var","PostHogFeatureFlags","_override_warning","flagCallReported","warn","getFlags","flagEnabled","send_event","$feature_flag","$feature_flag_response","flags","SET_QUEUE_KEY","SET_ONCE_QUEUE_KEY","UNSET_QUEUE_KEY","ADD_QUEUE_KEY","APPEND_QUEUE_KEY","REMOVE_QUEUE_KEY","UNION_QUEUE_KEY","PEOPLE_DISTINCT_ID_KEY","ALIAS_ID_KEY","CAMPAIGN_IDS_KEY","EVENT_TIMERS_KEY","SESSION_RECORDING_ENABLED","SESSION_ID","RESERVED_PROPERTIES","PostHogPersistence","config","campaign_params_saved","storage_type","storage","load","update_config","upgrade","save","addFeatureFlagsHandler","featureFlagEventHandlers","receivedFeatureFlags","disabled","upgrade_from_old_lib","old_cookie_name","old_cookie","register_once","_expire_notification_campaigns","expire_days","clear","default_value","default_expiry","campaigns_shown","EXPIRY_TIME","campaign_id","update_campaign_params","update_search_keyword","$initial_referrer","$initial_referring_domain","$referrer","$referring_domain","safe_merge","set_disabled","set_cross_subdomain","set_secure","get_cross_subdomain","set_event_timer","event_name","timers","remove_event_timer","SESSION_CHANGE_THRESHOLD","lastTimestamp","sessionId","BASE_ENDPOINT","SessionRecording","captureStarted","snapshots","emit","endpoint","_startCapture","submitRecordings","_captureSnapshot","assign","_onScriptLoaded","rrweb","record","$snapshot_data","$session_id","_captureMetrics","incr","blockClass","ignoreClass","_addCaptureHook","eventName","addCustomEvent","transport","_forceCompression","_noTruncate","_batchKey","_metrics","rrweb_full_snapshot","Toolbar","editorParams","toolbarVersion","_loadEditor","apiURL","set_config","debug","history","stateHash","state","parseFromUrl","keys","replaceState","title","userIntent","toolbarScript","editorUrl","endsWith","RequestQueue","captureMetrics","handlePollRequest","pollInterval","isPolling","_event_queue","_empty_queue_count","_poller","_pollInterval","interval","poll","clearTimeout","requests","formatQueue","dataKey","request","CaptureMetrics","metrics","by","payload","requestId","startTime","finishRequest","markRequestFailed","ch2","wk","transfer","cb","u","createObjectURL","Blob","Worker","onerror","onmessage","postMessage","u8","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","b","r","_a","fl","revfl","_b","fd","revfd","rev","hMap","cd","mb","s","le","co","rvb","sv","r_1","m","flt","fdt","flm","flrm","fdm","fdrm","max","o","bits16","shft","slc","subarray","inflt","dat","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","pos","bt","lm","dm","lbt","dbt","tbts","t","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","mxa","sym","add","dsym","wbits","wbits16","hTree","t2","sort","i0","i1","i2","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","flen","ftlen","dtlen","ll","dl","llm","lcts","clct","len","dst","deo","et","dflt","lvl","plvl","pre","post","lst","ceil","opt","msk_1","prev","head","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","min","maxd","ml","nl","mmd","md","ti","pti","lin","din","crct","crc","cr","adler","dopt","level","mem","mrg","wcln","fn","fnStr","td","ks","lastIndexOf","st_1","spInd","cbfs","constructor","wrkr","fns","td_1","bInflt","inflateSync","pbf","gu8","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zlv","size","cbify","opts","terminate","consume","astrm","strm","ondata","ev","astrmify","b2","b4","b8","filename","mtime","floor","flg","zs","lv","AsyncCmpStrm","Deflate","chunk","AsyncDeflate","deflate","Inflate","bts","AsyncInflate","inflate","Gzip","raw","AsyncGzip","gzip","gzipSync","Gunzip","AsyncGunzip","gunzip","gunzipSync","Zlib","AsyncZlib","zlib","zlibSync","Unzlib","AsyncUnzlib","unzlib","unzlibSync","Decompress","G","I","Z","_this_1","AsyncDecompress","decompressSync","fltn","te","TextEncoder","TextDecoder","tds","decode","stream","dutf8","DecodeUTF8","np","EncodeUTF8","strToU8","latin1","ar_1","encode","ar","ai","strFromU8","ext","dbf","slzh","zh","z","fnl","es","z64e","sc","su","off","wzh","ce","flag","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","attrs","czdd","wzf","ZipPassThrough","process","ZipDeflate","AsyncZipDeflate","Zip","file","hl","header","chks","pAll","_i","chks_1","chk","ind","uf","nxt","splice","zip","tot","slft","files","term","tAll","cbf","oe","cdl","loc","_loop_1","cbl","zipSync","UnzipPassThrough","UnzipInflate","AsyncUnzipInflate","Unzip","onfile","toAdd","is","pl","_loop_2","sig","this_1","bf","cmp_1","dd","chks_2","sc_1","file_1","chks_3","final_1","state_1","decoder","unzip","_loop_3","c_1","no","infl","unzipSync","c_2","decideCompression","compressionSupport","compressData","jsonData","blob","urlQueryArgs","encodePostData","sendBeacon","body_data","xhr","headers","req","XMLHttpRequest","open","startRequest","data_size","headerValue","headerName","setRequestHeader","withCredentials","onreadystatechange","readyState","status","decr","responseText","statusText","verbose","send","init_type","posthog_master","INIT_MODULE","INIT_SNIPPET","__NOOP","__NOOPTIONS","PRIMARY_INSTANCE_NAME","USE_XHR","ENQUEUE_REQUESTS","defaultConfig","api_host","api_method","api_transport","rageclick","cross_subdomain_cookie","persistence_name","cookie_name","loaded","store_google","save_referrer","img","capture_pageview","cookie_expiration","disable_session_recording","disable_persistence","disable_cookie","secure_cookie","protocol","ip","opt_out_capturing_by_default","opt_out_persistence_by_default","opt_out_capturing_persistence_type","opt_out_capturing_cookie_prefix","property_blacklist","sanitize_properties","xhr_headers","inapp_protocol","inapp_link_new_window","request_batching","_onCapture","_capture_metrics","PostHogLib","create_mplib","featureFlags","feature_flags","startRecordingIfEnabled","num_buckets","num_enabled_buckets","_execute_array","_loaded","callback_fn","_requestQueue","_handle_queued_event","__captureHooks","__request_queue","_gdpr_init","uuid","$device_id","_handle_unload","_start_queue_if_opted_in","has_opted_out_capturing","_dom_loaded","item","callback_function","jsc","randomized_cb","callback_string","updateUnloadMetrics","captureInProgressRequests","unload","__compress_and_send_json_request","_options","DEFAULT_OPTIONS","useSendBeacon","script","async","defer","array","fn_name","alias_calls","other_calls","capturing_calls","execute","calls","caller","start_timestamp","_calculate_event_properties","has_unique_traits","enqueue","_invokeCaptureHooks","event_properties","persistenceProps","duration_in_ms","toFixed","blacklisted_prop","page","property","_register_single","isFeatureEnabled","reloadFeatureFlags","onFeatureFlags","identify","new_distinct_id","userProperties","previous_distinct_id","$user_id","$had_persisted_distinct_id","$anon_distinct_id","reset","reset_device_id","alias","original","_this","prop_name","property_name","is_localStorage_requested","has_opted_in_capturing","persistence_type","opt_in_capturing","enable_persistence","opt_out_capturing","clear_persistence","clear_opt_in_out_capturing","_gdpr_update_persistence","_gdpr_call_func","cookie_prefix","opt_in_captureing","deprecate_warning","opt_out_captureing","has_opted_in_captureing","has_opted_out_captureing","clear_opt_in_out_captureing","sentry_integration","organization","projectId","setupOnce","addGlobalEventProcessor","__loaded","tags","$sentry_event_id","event_id","$sentry_exception","exception","decodeLZ64","instances","extend_mp","override_ph_init_func","add_dom_loaded_handler","dom_loaded_handler","done","inst","do_scroll_check","documentElement","doScroll","attachEvent","toplevel","frameElement","init_from_snippet","posthog","init_as_module","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","ws","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","stack","overlay","createErrorOverlay","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","dep","deps","cached","cache","some"],"mappings":"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","file":"array.js","sourceRoot":"../src","sourcesContent":["// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\n\n// private property\nvar f = String.fromCharCode\nvar keyStrBase64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\nvar keyStrUriSafe = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$'\nvar baseReverseDic = {}\n\nfunction getBaseValue(alphabet, character) {\n    if (!baseReverseDic[alphabet]) {\n        baseReverseDic[alphabet] = {}\n        for (var i = 0; i < alphabet.length; i++) {\n            baseReverseDic[alphabet][alphabet.charAt(i)] = i\n        }\n    }\n    return baseReverseDic[alphabet][character]\n}\n\nexport var LZString = {\n    compressToBase64: function (input) {\n        if (input == null) return ''\n        var res = LZString._compress(input, 6, function (a) {\n            return keyStrBase64.charAt(a)\n        })\n        switch (\n            res.length % 4 // To produce valid Base64\n        ) {\n            default: // When could this happen ?\n            case 0:\n                return res\n            case 1:\n                return res + '==='\n            case 2:\n                return res + '=='\n            case 3:\n                return res + '='\n        }\n    },\n\n    decompressFromBase64: function (input) {\n        if (input == null) return ''\n        if (input == '') return null\n        return LZString._decompress(input.length, 32, function (index) {\n            return getBaseValue(keyStrBase64, input.charAt(index))\n        })\n    },\n\n    compressToUTF16: function (input) {\n        if (input == null) return ''\n        return (\n            LZString._compress(input, 15, function (a) {\n                return f(a + 32)\n            }) + ' '\n        )\n    },\n\n    decompressFromUTF16: function (compressed) {\n        if (compressed == null) return ''\n        if (compressed == '') return null\n        return LZString._decompress(compressed.length, 16384, function (index) {\n            return compressed.charCodeAt(index) - 32\n        })\n    },\n\n    //compress into uint8array (UCS-2 big endian format)\n    compressToUint8Array: function (uncompressed) {\n        var compressed = LZString.compress(uncompressed)\n        var buf = new Uint8Array(compressed.length * 2) // 2 bytes per character\n\n        for (var i = 0, TotalLen = compressed.length; i < TotalLen; i++) {\n            var current_value = compressed.charCodeAt(i)\n            buf[i * 2] = current_value >>> 8\n            buf[i * 2 + 1] = current_value % 256\n        }\n        return buf\n    },\n\n    //decompress from uint8array (UCS-2 big endian format)\n    decompressFromUint8Array: function (compressed) {\n        if (compressed === null || compressed === undefined) {\n            return LZString.decompress(compressed)\n        } else {\n            var buf = new Array(compressed.length / 2) // 2 bytes per character\n            for (var i = 0, TotalLen = buf.length; i < TotalLen; i++) {\n                buf[i] = compressed[i * 2] * 256 + compressed[i * 2 + 1]\n            }\n\n            var result = []\n            buf.forEach(function (c) {\n                result.push(f(c))\n            })\n            return LZString.decompress(result.join(''))\n        }\n    },\n\n    //compress into a string that is already URI encoded\n    compressToEncodedURIComponent: function (input) {\n        if (input == null) return ''\n        return LZString._compress(input, 6, function (a) {\n            return keyStrUriSafe.charAt(a)\n        })\n    },\n\n    //decompress from an output of compressToEncodedURIComponent\n    decompressFromEncodedURIComponent: function (input) {\n        if (input == null) return ''\n        if (input == '') return null\n        input = input.replace(/ /g, '+')\n        return LZString._decompress(input.length, 32, function (index) {\n            return getBaseValue(keyStrUriSafe, input.charAt(index))\n        })\n    },\n\n    compress: function (uncompressed) {\n        return LZString._compress(uncompressed, 16, function (a) {\n            return f(a)\n        })\n    },\n    _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n        if (uncompressed == null) return ''\n        var i,\n            value,\n            context_dictionary = {},\n            context_dictionaryToCreate = {},\n            context_c = '',\n            context_wc = '',\n            context_w = '',\n            context_enlargeIn = 2, // Compensate for the first entry which should not count\n            context_dictSize = 3,\n            context_numBits = 2,\n            context_data = [],\n            context_data_val = 0,\n            context_data_position = 0,\n            ii\n\n        for (ii = 0; ii < uncompressed.length; ii += 1) {\n            context_c = uncompressed.charAt(ii)\n            if (!Object.prototype.hasOwnProperty.call(context_dictionary, context_c)) {\n                context_dictionary[context_c] = context_dictSize++\n                context_dictionaryToCreate[context_c] = true\n            }\n\n            context_wc = context_w + context_c\n            if (Object.prototype.hasOwnProperty.call(context_dictionary, context_wc)) {\n                context_w = context_wc\n            } else {\n                if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\n                    if (context_w.charCodeAt(0) < 256) {\n                        for (i = 0; i < context_numBits; i++) {\n                            context_data_val = context_data_val << 1\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                        }\n                        value = context_w.charCodeAt(0)\n                        for (i = 0; i < 8; i++) {\n                            context_data_val = (context_data_val << 1) | (value & 1)\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = value >> 1\n                        }\n                    } else {\n                        value = 1\n                        for (i = 0; i < context_numBits; i++) {\n                            context_data_val = (context_data_val << 1) | value\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = 0\n                        }\n                        value = context_w.charCodeAt(0)\n                        for (i = 0; i < 16; i++) {\n                            context_data_val = (context_data_val << 1) | (value & 1)\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = value >> 1\n                        }\n                    }\n                    context_enlargeIn--\n                    if (context_enlargeIn == 0) {\n                        context_enlargeIn = Math.pow(2, context_numBits)\n                        context_numBits++\n                    }\n                    delete context_dictionaryToCreate[context_w]\n                } else {\n                    value = context_dictionary[context_w]\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                }\n                context_enlargeIn--\n                if (context_enlargeIn == 0) {\n                    context_enlargeIn = Math.pow(2, context_numBits)\n                    context_numBits++\n                }\n                // Add wc to the dictionary.\n                context_dictionary[context_wc] = context_dictSize++\n                context_w = String(context_c)\n            }\n        }\n\n        // Output the code for w.\n        if (context_w !== '') {\n            if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\n                if (context_w.charCodeAt(0) < 256) {\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = context_data_val << 1\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                    }\n                    value = context_w.charCodeAt(0)\n                    for (i = 0; i < 8; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                } else {\n                    value = 1\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = (context_data_val << 1) | value\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = 0\n                    }\n                    value = context_w.charCodeAt(0)\n                    for (i = 0; i < 16; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                }\n                context_enlargeIn--\n                if (context_enlargeIn == 0) {\n                    context_enlargeIn = Math.pow(2, context_numBits)\n                    context_numBits++\n                }\n                delete context_dictionaryToCreate[context_w]\n            } else {\n                value = context_dictionary[context_w]\n                for (i = 0; i < context_numBits; i++) {\n                    context_data_val = (context_data_val << 1) | (value & 1)\n                    if (context_data_position == bitsPerChar - 1) {\n                        context_data_position = 0\n                        context_data.push(getCharFromInt(context_data_val))\n                        context_data_val = 0\n                    } else {\n                        context_data_position++\n                    }\n                    value = value >> 1\n                }\n            }\n            context_enlargeIn--\n            if (context_enlargeIn == 0) {\n                context_enlargeIn = Math.pow(2, context_numBits)\n                context_numBits++\n            }\n        }\n\n        // Mark the end of the stream\n        value = 2\n        for (i = 0; i < context_numBits; i++) {\n            context_data_val = (context_data_val << 1) | (value & 1)\n            if (context_data_position == bitsPerChar - 1) {\n                context_data_position = 0\n                context_data.push(getCharFromInt(context_data_val))\n                context_data_val = 0\n            } else {\n                context_data_position++\n            }\n            value = value >> 1\n        }\n\n        // Flush the last char\n        while (true) {\n            context_data_val = context_data_val << 1\n            if (context_data_position == bitsPerChar - 1) {\n                context_data.push(getCharFromInt(context_data_val))\n                break\n            } else context_data_position++\n        }\n        return context_data.join('')\n    },\n\n    decompress: function (compressed) {\n        if (compressed == null) return ''\n        if (compressed == '') return null\n        return LZString._decompress(compressed.length, 32768, function (index) {\n            return compressed.charCodeAt(index)\n        })\n    },\n\n    _decompress: function (length, resetValue, getNextValue) {\n        var dictionary = [],\n            enlargeIn = 4,\n            dictSize = 4,\n            numBits = 3,\n            entry = '',\n            result = [],\n            i,\n            w,\n            bits,\n            resb,\n            maxpower,\n            power,\n            c,\n            data = { val: getNextValue(0), position: resetValue, index: 1 }\n\n        for (i = 0; i < 3; i += 1) {\n            dictionary[i] = i\n        }\n\n        bits = 0\n        maxpower = Math.pow(2, 2)\n        power = 1\n        while (power != maxpower) {\n            resb = data.val & data.position\n            data.position >>= 1\n            if (data.position == 0) {\n                data.position = resetValue\n                data.val = getNextValue(data.index++)\n            }\n            bits |= (resb > 0 ? 1 : 0) * power\n            power <<= 1\n        }\n\n        switch (bits) {\n            case 0:\n                bits = 0\n                maxpower = Math.pow(2, 8)\n                power = 1\n                while (power != maxpower) {\n                    resb = data.val & data.position\n                    data.position >>= 1\n                    if (data.position == 0) {\n                        data.position = resetValue\n                        data.val = getNextValue(data.index++)\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power\n                    power <<= 1\n                }\n                c = f(bits)\n                break\n            case 1:\n                bits = 0\n                maxpower = Math.pow(2, 16)\n                power = 1\n                while (power != maxpower) {\n                    resb = data.val & data.position\n                    data.position >>= 1\n                    if (data.position == 0) {\n                        data.position = resetValue\n                        data.val = getNextValue(data.index++)\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power\n                    power <<= 1\n                }\n                c = f(bits)\n                break\n            case 2:\n                return ''\n        }\n        dictionary[3] = c\n        w = c\n        result.push(c)\n        while (true) {\n            if (data.index > length) {\n                return ''\n            }\n\n            bits = 0\n            maxpower = Math.pow(2, numBits)\n            power = 1\n            while (power != maxpower) {\n                resb = data.val & data.position\n                data.position >>= 1\n                if (data.position == 0) {\n                    data.position = resetValue\n                    data.val = getNextValue(data.index++)\n                }\n                bits |= (resb > 0 ? 1 : 0) * power\n                power <<= 1\n            }\n\n            switch ((c = bits)) {\n                case 0:\n                    bits = 0\n                    maxpower = Math.pow(2, 8)\n                    power = 1\n                    while (power != maxpower) {\n                        resb = data.val & data.position\n                        data.position >>= 1\n                        if (data.position == 0) {\n                            data.position = resetValue\n                            data.val = getNextValue(data.index++)\n                        }\n                        bits |= (resb > 0 ? 1 : 0) * power\n                        power <<= 1\n                    }\n\n                    dictionary[dictSize++] = f(bits)\n                    c = dictSize - 1\n                    enlargeIn--\n                    break\n                case 1:\n                    bits = 0\n                    maxpower = Math.pow(2, 16)\n                    power = 1\n                    while (power != maxpower) {\n                        resb = data.val & data.position\n                        data.position >>= 1\n                        if (data.position == 0) {\n                            data.position = resetValue\n                            data.val = getNextValue(data.index++)\n                        }\n                        bits |= (resb > 0 ? 1 : 0) * power\n                        power <<= 1\n                    }\n                    dictionary[dictSize++] = f(bits)\n                    c = dictSize - 1\n                    enlargeIn--\n                    break\n                case 2:\n                    return result.join('')\n            }\n\n            if (enlargeIn == 0) {\n                enlargeIn = Math.pow(2, numBits)\n                numBits++\n            }\n\n            if (dictionary[c]) {\n                entry = dictionary[c]\n            } else {\n                if (c === dictSize) {\n                    entry = w + w.charAt(0)\n                } else {\n                    return null\n                }\n            }\n            result.push(entry)\n\n            // Add w+entry[0] to the dictionary.\n            dictionary[dictSize++] = w + entry.charAt(0)\n            enlargeIn--\n\n            w = entry\n\n            if (enlargeIn == 0) {\n                enlargeIn = Math.pow(2, numBits)\n                numBits++\n            }\n        }\n    },\n}\n","module.exports = {\n    \"name\": \"posthog-js\",\n    \"version\": \"1.8.3\",\n    \"description\": \"Posthog-js allows you to automatically capture usage and send events to PostHog.\",\n    \"repository\": \"https://github.com/PostHog/posthog-js\",\n    \"author\": \"hey@posthog.com\",\n    \"license\": \"MIT\",\n    \"scripts\": {\n        \"start\": \"parcel watch src/loader-globals.js --out-file dist/array.js\",\n        \"serve\": \"parcel serve src/loader-globals.js --port 3001 --out-file dist/array.js\",\n        \"build\": \"yarn build-array && yarn build-module && yarn build-es-module && yarn process-types && yarn build-react\",\n        \"build-array\": \"parcel build src/loader-globals.js --out-file dist/array.js --no-source-maps\",\n        \"build-module\": \"rollup -i src/loader-module.js -f cjs -o dist/module.js -c rollup.config.js\",\n        \"build-es-module\": \"rollup -i src/loader-module.js -f es -o dist/es.js -c rollup.config.js\",\n        \"build-react\": \"cd react; yarn; cd ..; tsc -p react\",\n        \"process-types\": \"mkdir -p dist; eslint src --ext .ts -c .eslintrc.ts.js --fix && tsc && cp -f src/*.d.ts dist/\",\n        \"lint\": \"eslint src --fix\",\n        \"prepublishOnly\": \"yarn lint && yarn test && yarn build && yarn test-react\",\n        \"test\": \"jest\",\n        \"test-react\": \"cd react; jest\",\n        \"test-watch\": \"jest --watch\",\n        \"cypress\": \"cypress open\"\n    },\n    \"main\": \"dist/module.js\",\n    \"module\": \"dist/es.js\",\n    \"files\": [\n        \"dist/*\",\n        \"react/dist/*\"\n    ],\n    \"devDependencies\": {\n        \"@babel/core\": \"^7.12.10\",\n        \"@babel/preset-env\": \"^7.12.11\",\n        \"@rollup/plugin-babel\": \"^5.2.1\",\n        \"@rollup/plugin-json\": \"^4.1.0\",\n        \"@rollup/plugin-node-resolve\": \"^8.1.0\",\n        \"@typescript-eslint/eslint-plugin\": \"^3.5.0\",\n        \"@typescript-eslint/parser\": \"^3.5.0\",\n        \"babel-eslint\": \"^10.1.0\",\n        \"babel-jest\": \"^26.6.3\",\n        \"cypress\": \"^6.1.0\",\n        \"eslint\": \"^7.3.1\",\n        \"eslint-plugin-prettier\": \"^3.1.4\",\n        \"eslint-plugin-react\": \"^7.21.5\",\n        \"eslint-plugin-react-hooks\": \"^4.2.0\",\n        \"given2\": \"^2.1.7\",\n        \"husky\": \"^4.2.5\",\n        \"jest\": \"^26.1.0\",\n        \"jsdom\": \"16.2.2\",\n        \"jsdom-global\": \"3.0.2\",\n        \"lint-staged\": \"^10.2.11\",\n        \"localStorage\": \"1.0.4\",\n        \"parcel\": \"^1.12.4\",\n        \"posthog-js\": \"link:.\",\n        \"prettier\": \"^2.0.5\",\n        \"rollup\": \"^2.18.2\",\n        \"rrweb\": \"^0.9.9\",\n        \"sinon\": \"9.0.2\",\n        \"typescript\": \"^3.9.6\"\n    },\n    \"husky\": {\n        \"hooks\": {\n            \"pre-commit\": \"lint-staged\"\n        }\n    },\n    \"lint-staged\": {\n        \"*.{ts,tsx,js,json}\": \"prettier --write\",\n        \"*.{ts,tsx}\": [\n            \"eslint -c .eslintrc.ts.js --fix\",\n            \"tsc --noEmit --esModuleInterop --jsx react\"\n        ]\n    },\n    \"jest\": {\n        \"testPathIgnorePatterns\": [\n            \"/node_modules/\",\n            \"/cypress/\",\n            \"/react/\"\n        ],\n        \"moduleFileExtensions\": [\n            \"js\",\n            \"json\"\n        ],\n        \"setupFilesAfterEnv\": [\n            \"given2/setup\"\n        ],\n        \"clearMocks\": true\n    },\n    \"dependencies\": {\n        \"fflate\": \"^0.5.3\"\n    }\n}\n;","import { version } from '../package.json'\n\nvar Config = {\n    DEBUG: false,\n    LIB_VERSION: version,\n}\n\nexport default Config\n","/* eslint camelcase: \"off\", eqeqeq: \"off\" */\nimport Config from './config'\n\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\nconst ArrayProto = Array.prototype,\n    FuncProto = Function.prototype,\n    ObjProto = Object.prototype,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty,\n    win = typeof window !== 'undefined' ? window : {},\n    navigator = win.navigator || { userAgent: '' },\n    document = win.document || {},\n    userAgent = navigator.userAgent\n\nconst nativeBind = FuncProto.bind,\n    nativeForEach = ArrayProto.forEach,\n    nativeIndexOf = ArrayProto.indexOf,\n    nativeIsArray = Array.isArray,\n    breaker = {}\n\nvar _ = {\n    trim: function (str) {\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n    },\n}\n\n// Console override\nvar console = {\n    /** @type {function(...*)} */\n    log: function () {\n        if (Config.DEBUG && !_.isUndefined(window.console) && window.console) {\n            try {\n                window.console.log.apply(window.console, arguments)\n            } catch (err) {\n                _.each(arguments, function (arg) {\n                    window.console.log(arg)\n                })\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    error: function () {\n        if (Config.DEBUG && !_.isUndefined(window.console) && window.console) {\n            var args = ['PostHog error:', ...arguments]\n            try {\n                window.console.error.apply(window.console, args)\n            } catch (err) {\n                _.each(args, function (arg) {\n                    window.console.error(arg)\n                })\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    critical: function () {\n        if (!_.isUndefined(window.console) && window.console) {\n            var args = ['PostHog error:', ...arguments]\n            try {\n                window.console.error.apply(window.console, args)\n            } catch (err) {\n                _.each(args, function (arg) {\n                    window.console.error(arg)\n                })\n            }\n        }\n    },\n}\n\n// UNDERSCORE\n// Embed part of the Underscore Library\n_.bind = function (func, context) {\n    var args, bound\n    if (nativeBind && func.bind === nativeBind) {\n        return nativeBind.apply(func, slice.call(arguments, 1))\n    }\n    if (!_.isFunction(func)) {\n        throw new TypeError()\n    }\n    args = slice.call(arguments, 2)\n    bound = function () {\n        if (!(this instanceof bound)) {\n            return func.apply(context, args.concat(slice.call(arguments)))\n        }\n        var ctor = {}\n        ctor.prototype = func.prototype\n        var self = new ctor()\n        ctor.prototype = null\n        var result = func.apply(self, args.concat(slice.call(arguments)))\n        if (Object(result) === result) {\n            return result\n        }\n        return self\n    }\n    return bound\n}\n\n_.bind_instance_methods = function (obj) {\n    for (var func in obj) {\n        if (typeof obj[func] === 'function') {\n            obj[func] = _.bind(obj[func], obj)\n        }\n    }\n}\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} context\n */\n_.each = function (obj, iterator, context) {\n    if (obj === null || obj === undefined) {\n        return\n    }\n    if (nativeForEach && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, context)\n    } else if (obj.length === +obj.length) {\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n                return\n            }\n        }\n    } else {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                if (iterator.call(context, obj[key], key, obj) === breaker) {\n                    return\n                }\n            }\n        }\n    }\n}\n\n_.extend = function (obj) {\n    _.each(slice.call(arguments, 1), function (source) {\n        for (var prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop]\n            }\n        }\n    })\n    return obj\n}\n\n_.isArray =\n    nativeIsArray ||\n    function (obj) {\n        return toString.call(obj) === '[object Array]'\n    }\n\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// var bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\n_.isFunction = function (f) {\n    try {\n        return /^\\s*\\bfunction\\b/.test(f)\n    } catch (x) {\n        return false\n    }\n}\n\n_.include = function (obj, target) {\n    var found = false\n    if (obj === null) {\n        return found\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1\n    }\n    _.each(obj, function (value) {\n        if (found || (found = value === target)) {\n            return breaker\n        }\n    })\n    return found\n}\n\n_.includes = function (str, needle) {\n    return str.indexOf(needle) !== -1\n}\n\n// Underscore Addons\n_.isObject = function (obj) {\n    return obj === Object(obj) && !_.isArray(obj)\n}\n\n_.isEmptyObject = function (obj) {\n    if (_.isObject(obj)) {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                return false\n            }\n        }\n        return true\n    }\n    return false\n}\n\n_.isUndefined = function (obj) {\n    return obj === void 0\n}\n\n_.isString = function (obj) {\n    return toString.call(obj) == '[object String]'\n}\n\n_.isDate = function (obj) {\n    return toString.call(obj) == '[object Date]'\n}\n\n_.isNumber = function (obj) {\n    return toString.call(obj) == '[object Number]'\n}\n\n_.encodeDates = function (obj) {\n    _.each(obj, function (v, k) {\n        if (_.isDate(v)) {\n            obj[k] = _.formatDate(v)\n        } else if (_.isObject(v)) {\n            obj[k] = _.encodeDates(v) // recurse\n        }\n    })\n    return obj\n}\n\n_.timestamp = function () {\n    Date.now =\n        Date.now ||\n        function () {\n            return +new Date()\n        }\n    return Date.now()\n}\n\n_.formatDate = function (d) {\n    // YYYY-MM-DDTHH:MM:SS in UTC\n    function pad(n) {\n        return n < 10 ? '0' + n : n\n    }\n    return (\n        d.getUTCFullYear() +\n        '-' +\n        pad(d.getUTCMonth() + 1) +\n        '-' +\n        pad(d.getUTCDate()) +\n        'T' +\n        pad(d.getUTCHours()) +\n        ':' +\n        pad(d.getUTCMinutes()) +\n        ':' +\n        pad(d.getUTCSeconds())\n    )\n}\n\n_.safewrap = function (f) {\n    return function () {\n        try {\n            return f.apply(this, arguments)\n        } catch (e) {\n            console.critical('Implementation error. Please turn on debug and contact support@posthog.com.')\n            if (Config.DEBUG) {\n                console.critical(e)\n            }\n        }\n    }\n}\n\n_.safewrap_class = function (klass, functions) {\n    for (var i = 0; i < functions.length; i++) {\n        klass.prototype[functions[i]] = _.safewrap(klass.prototype[functions[i]])\n    }\n}\n\n_.safewrap_instance_methods = function (obj) {\n    for (var func in obj) {\n        if (typeof obj[func] === 'function') {\n            obj[func] = _.safewrap(obj[func])\n        }\n    }\n}\n\n_.strip_empty_properties = function (p) {\n    var ret = {}\n    _.each(p, function (v, k) {\n        if (_.isString(v) && v.length > 0) {\n            ret[k] = v\n        }\n    })\n    return ret\n}\n\n// Deep copies an object.\n// It handles cycles by replacing all references to them with `undefined`\n// Also supports customizing native values\nconst COPY_IN_PROGRESS_ATTRIBUTE =\n    typeof Symbol !== 'undefined' ? Symbol('__deepCircularCopyInProgress__') : '__deepCircularCopyInProgress__'\n\nfunction deepCircularCopy(value, customizer) {\n    if (value !== Object(value)) return customizer ? customizer(value) : value // primitive value\n\n    if (COPY_IN_PROGRESS_ATTRIBUTE in value) return undefined\n\n    value[COPY_IN_PROGRESS_ATTRIBUTE] = true\n    let result\n\n    if (_.isArray(value)) {\n        result = []\n        _.each(value, (it) => {\n            result.push(deepCircularCopy(it, customizer))\n        })\n    } else {\n        result = {}\n        _.each(value, (val, key) => {\n            if (key !== COPY_IN_PROGRESS_ATTRIBUTE) {\n                result[key] = deepCircularCopy(val, customizer)\n            }\n        })\n    }\n    delete value[COPY_IN_PROGRESS_ATTRIBUTE]\n    return result\n}\n\n_.copyAndTruncateStrings = (object, maxStringLength) =>\n    deepCircularCopy(\n        object,\n        (value) => {\n            if (typeof value === 'string' && maxStringLength !== null) {\n                value = value.slice(0, maxStringLength)\n            }\n            return value\n        },\n        {}\n    )\n\n_.base64Encode = function (data) {\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n    var o1,\n        o2,\n        o3,\n        h1,\n        h2,\n        h3,\n        h4,\n        bits,\n        i = 0,\n        ac = 0,\n        enc = '',\n        tmp_arr = []\n\n    if (!data) {\n        return data\n    }\n\n    data = _.utf8Encode(data)\n\n    do {\n        // pack three octets into four hexets\n        o1 = data.charCodeAt(i++)\n        o2 = data.charCodeAt(i++)\n        o3 = data.charCodeAt(i++)\n\n        bits = (o1 << 16) | (o2 << 8) | o3\n\n        h1 = (bits >> 18) & 0x3f\n        h2 = (bits >> 12) & 0x3f\n        h3 = (bits >> 6) & 0x3f\n        h4 = bits & 0x3f\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4)\n    } while (i < data.length)\n\n    enc = tmp_arr.join('')\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '=='\n            break\n        case 2:\n            enc = enc.slice(0, -1) + '='\n            break\n    }\n\n    return enc\n}\n\n_.utf8Encode = function (string) {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n')\n\n    var utftext = '',\n        start,\n        end\n    var stringl = 0,\n        n\n\n    start = end = 0\n    stringl = string.length\n\n    for (n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n)\n        var enc = null\n\n        if (c1 < 128) {\n            end++\n        } else if (c1 > 127 && c1 < 2048) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128)\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128)\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end)\n            }\n            utftext += enc\n            start = end = n + 1\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length)\n    }\n\n    return utftext\n}\n\n_.UUID = (function () {\n    // Time/ticks information\n    // 1*new Date() is a cross browser version of Date.now()\n    var T = function () {\n        var d = 1 * new Date(),\n            i = 0\n\n        // this while loop figures how many browser ticks go by\n        // before 1*new Date() returns a new number, ie the amount\n        // of ticks that go by per millisecond\n        while (d == 1 * new Date()) {\n            i++\n        }\n\n        return d.toString(16) + i.toString(16)\n    }\n\n    // Math.Random entropy\n    var R = function () {\n        return Math.random().toString(16).replace('.', '')\n    }\n\n    // User agent entropy\n    // This function takes the user agent string, and then xors\n    // together each sequence of 8 bytes.  This produces a final\n    // sequence of 8 bytes which it returns as hex.\n    var UA = function () {\n        var ua = userAgent,\n            i,\n            ch,\n            buffer = [],\n            ret = 0\n\n        function xor(result, byte_array) {\n            var j,\n                tmp = 0\n            for (j = 0; j < byte_array.length; j++) {\n                tmp |= buffer[j] << (j * 8)\n            }\n            return result ^ tmp\n        }\n\n        for (i = 0; i < ua.length; i++) {\n            ch = ua.charCodeAt(i)\n            buffer.unshift(ch & 0xff)\n            if (buffer.length >= 4) {\n                ret = xor(ret, buffer)\n                buffer = []\n            }\n        }\n\n        if (buffer.length > 0) {\n            ret = xor(ret, buffer)\n        }\n\n        return ret.toString(16)\n    }\n\n    return function () {\n        var se = (window.screen.height * window.screen.width).toString(16)\n        return T() + '-' + R() + '-' + UA() + '-' + se + '-' + T()\n    }\n})()\n\n// _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false captureing data\n_.isBlockedUA = function (ua) {\n    if (/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua)) {\n        return true\n    }\n    return false\n}\n\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\n_.HTTPBuildQuery = function (formdata, arg_separator) {\n    var use_val,\n        use_key,\n        tph_arr = []\n\n    if (_.isUndefined(arg_separator)) {\n        arg_separator = '&'\n    }\n\n    _.each(formdata, function (val, key) {\n        use_val = encodeURIComponent(val.toString())\n        use_key = encodeURIComponent(key)\n        tph_arr[tph_arr.length] = use_key + '=' + use_val\n    })\n\n    return tph_arr.join(arg_separator)\n}\n\n_.getQueryParam = function (url, param) {\n    // Expects a raw URL\n\n    param = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]')\n    var regexS = '[\\\\?&]' + param + '=([^&#]*)',\n        regex = new RegExp(regexS),\n        results = regex.exec(url)\n    if (results === null || (results && typeof results[1] !== 'string' && results[1].length)) {\n        return ''\n    } else {\n        var result = results[1]\n        try {\n            result = decodeURIComponent(result)\n        } catch (err) {\n            console.error('Skipping decoding for malformed query param: ' + result)\n        }\n        return result.replace(/\\+/g, ' ')\n    }\n}\n\n_.getHashParam = function (hash, param) {\n    var matches = hash.match(new RegExp(param + '=([^&]*)'))\n    return matches ? matches[1] : null\n}\n\n_.register_event = (function () {\n    // written by Dean Edwards, 2005\n    // with input from Tino Zijdel - crisp@xs4all.nl\n    // with input from Carl Sverre - mail@carlsverre.com\n    // with input from PostHog\n    // http://dean.edwards.name/weblog/2005/10/add-event/\n    // https://gist.github.com/1930440\n\n    /**\n     * @param {Object} element\n     * @param {string} type\n     * @param {function(...*)} handler\n     * @param {boolean=} oldSchool\n     * @param {boolean=} useCapture\n     */\n    var register_event = function (element, type, handler, oldSchool, useCapture) {\n        if (!element) {\n            console.error('No valid element provided to register_event')\n            return\n        }\n\n        if (element.addEventListener && !oldSchool) {\n            element.addEventListener(type, handler, !!useCapture)\n        } else {\n            var ontype = 'on' + type\n            var old_handler = element[ontype] // can be undefined\n            element[ontype] = makeHandler(element, handler, old_handler)\n        }\n    }\n\n    function makeHandler(element, new_handler, old_handlers) {\n        var handler = function (event) {\n            event = event || fixEvent(window.event)\n\n            // this basically happens in firefox whenever another script\n            // overwrites the onload callback and doesn't pass the event\n            // object to previously defined callbacks.  All the browsers\n            // that don't define window.event implement addEventListener\n            // so the dom_loaded handler will still be fired as usual.\n            if (!event) {\n                return undefined\n            }\n\n            var ret = true\n            var old_result, new_result\n\n            if (_.isFunction(old_handlers)) {\n                old_result = old_handlers(event)\n            }\n            new_result = new_handler.call(element, event)\n\n            if (false === old_result || false === new_result) {\n                ret = false\n            }\n\n            return ret\n        }\n\n        return handler\n    }\n\n    function fixEvent(event) {\n        if (event) {\n            event.preventDefault = fixEvent.preventDefault\n            event.stopPropagation = fixEvent.stopPropagation\n        }\n        return event\n    }\n    fixEvent.preventDefault = function () {\n        this.returnValue = false\n    }\n    fixEvent.stopPropagation = function () {\n        this.cancelBubble = true\n    }\n\n    return register_event\n})()\n\n_.info = {\n    campaignParams: function () {\n        var campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term'.split(' '),\n            kw = '',\n            params = {}\n        _.each(campaign_keywords, function (kwkey) {\n            kw = _.getQueryParam(document.URL, kwkey)\n            if (kw.length) {\n                params[kwkey] = kw\n            }\n        })\n\n        return params\n    },\n\n    searchEngine: function (referrer) {\n        if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n            return 'google'\n        } else if (referrer.search('https?://(.*)bing.com') === 0) {\n            return 'bing'\n        } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n            return 'yahoo'\n        } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n            return 'duckduckgo'\n        } else {\n            return null\n        }\n    },\n\n    searchInfo: function (referrer) {\n        var search = _.info.searchEngine(referrer),\n            param = search != 'yahoo' ? 'q' : 'p',\n            ret = {}\n\n        if (search !== null) {\n            ret['$search_engine'] = search\n\n            var keyword = _.getQueryParam(referrer, param)\n            if (keyword.length) {\n                ret['ph_keyword'] = keyword\n            }\n        }\n\n        return ret\n    },\n\n    /**\n     * This function detects which browser is running this script.\n     * The order of the checks are important since many user agents\n     * include key words used in later checks.\n     */\n    browser: function (user_agent, vendor, opera) {\n        vendor = vendor || '' // vendor is undefined for at least IE9\n        if (opera || _.includes(user_agent, ' OPR/')) {\n            if (_.includes(user_agent, 'Mini')) {\n                return 'Opera Mini'\n            }\n            return 'Opera'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry'\n        } else if (_.includes(user_agent, 'IEMobile') || _.includes(user_agent, 'WPDesktop')) {\n            return 'Internet Explorer Mobile'\n        } else if (_.includes(user_agent, 'SamsungBrowser/')) {\n            // https://developer.samsung.com/internet/user-agent-string-format\n            return 'Samsung Internet'\n        } else if (_.includes(user_agent, 'Edge') || _.includes(user_agent, 'Edg/')) {\n            return 'Microsoft Edge'\n        } else if (_.includes(user_agent, 'FBIOS')) {\n            return 'Facebook Mobile'\n        } else if (_.includes(user_agent, 'Chrome')) {\n            return 'Chrome'\n        } else if (_.includes(user_agent, 'CriOS')) {\n            return 'Chrome iOS'\n        } else if (_.includes(user_agent, 'UCWEB') || _.includes(user_agent, 'UCBrowser')) {\n            return 'UC Browser'\n        } else if (_.includes(user_agent, 'FxiOS')) {\n            return 'Firefox iOS'\n        } else if (_.includes(vendor, 'Apple')) {\n            if (_.includes(user_agent, 'Mobile')) {\n                return 'Mobile Safari'\n            }\n            return 'Safari'\n        } else if (_.includes(user_agent, 'Android')) {\n            return 'Android Mobile'\n        } else if (_.includes(user_agent, 'Konqueror')) {\n            return 'Konqueror'\n        } else if (_.includes(user_agent, 'Firefox')) {\n            return 'Firefox'\n        } else if (_.includes(user_agent, 'MSIE') || _.includes(user_agent, 'Trident/')) {\n            return 'Internet Explorer'\n        } else if (_.includes(user_agent, 'Gecko')) {\n            return 'Mozilla'\n        } else {\n            return ''\n        }\n    },\n\n    /**\n     * This function detects which browser version is running this script,\n     * parsing major and minor version (e.g., 42.1). User agent strings from:\n     * http://www.useragentstring.com/pages/useragentstring.php\n     */\n    browserVersion: function (userAgent, vendor, opera) {\n        var browser = _.info.browser(userAgent, vendor, opera)\n        var versionRegexs = {\n            'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n            'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n            Chrome: /Chrome\\/(\\d+(\\.\\d+)?)/,\n            'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n            'UC Browser': /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n            Safari: /Version\\/(\\d+(\\.\\d+)?)/,\n            'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            Opera: /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n            Firefox: /Firefox\\/(\\d+(\\.\\d+)?)/,\n            'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n            Konqueror: /Konqueror:(\\d+(\\.\\d+)?)/,\n            BlackBerry: /BlackBerry (\\d+(\\.\\d+)?)/,\n            'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n            'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n            'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n            Mozilla: /rv:(\\d+(\\.\\d+)?)/,\n        }\n        var regex = versionRegexs[browser]\n        if (regex === undefined) {\n            return null\n        }\n        var matches = userAgent.match(regex)\n        if (!matches) {\n            return null\n        }\n        return parseFloat(matches[matches.length - 2])\n    },\n\n    os: function () {\n        var a = userAgent\n        if (/Windows/i.test(a)) {\n            if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n                return 'Windows Phone'\n            }\n            return 'Windows'\n        } else if (/(iPhone|iPad|iPod)/.test(a)) {\n            return 'iOS'\n        } else if (/Android/.test(a)) {\n            return 'Android'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n            return 'BlackBerry'\n        } else if (/Mac/i.test(a)) {\n            return 'Mac OS X'\n        } else if (/Linux/.test(a)) {\n            return 'Linux'\n        } else if (/CrOS/.test(a)) {\n            return 'Chrome OS'\n        } else {\n            return ''\n        }\n    },\n\n    device: function (user_agent) {\n        if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n            return 'Windows Phone'\n        } else if (/iPad/.test(user_agent)) {\n            return 'iPad'\n        } else if (/iPod/.test(user_agent)) {\n            return 'iPod Touch'\n        } else if (/iPhone/.test(user_agent)) {\n            return 'iPhone'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry'\n        } else if (/Android/.test(user_agent)) {\n            return 'Android'\n        } else {\n            return ''\n        }\n    },\n\n    referringDomain: function (referrer) {\n        var split = referrer.split('/')\n        if (split.length >= 3) {\n            return split[2]\n        }\n        return ''\n    },\n\n    properties: function () {\n        return _.extend(\n            _.strip_empty_properties({\n                $os: _.info.os(),\n                $browser: _.info.browser(userAgent, navigator.vendor, window.opera),\n                $device: _.info.device(userAgent),\n            }),\n            {\n                $current_url: window.location.href,\n                $host: window.location.host,\n                $pathname: window.location.pathname,\n                $browser_version: _.info.browserVersion(userAgent, navigator.vendor, window.opera),\n                $screen_height: window.screen.height,\n                $screen_width: window.screen.width,\n                $lib: 'web',\n                $lib_version: Config.LIB_VERSION,\n                $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10),\n                $time: _.timestamp() / 1000, // epoch time in seconds\n            }\n        )\n    },\n\n    people_properties: function () {\n        return _.extend(\n            _.strip_empty_properties({\n                $os: _.info.os(),\n                $browser: _.info.browser(userAgent, navigator.vendor, window.opera),\n            }),\n            {\n                $browser_version: _.info.browserVersion(userAgent, navigator.vendor, window.opera),\n            }\n        )\n    },\n}\n\n// EXPORTS (for closure compiler)\n_['isObject'] = _.isObject\n_['isBlockedUA'] = _.isBlockedUA\n_['isEmptyObject'] = _.isEmptyObject\n_['info'] = _.info\n_['info']['device'] = _.info.device\n_['info']['browser'] = _.info.browser\n_['info']['browserVersion'] = _.info.browserVersion\n_['info']['properties'] = _.info.properties\n\nexport { win as window, _, userAgent, console, document }\n","import { _ } from './utils'\n\n/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n * @param {Element} el - element to get the className of\n * @returns {string} the element's class\n */\nexport function getClassName(el) {\n    switch (typeof el.className) {\n        case 'string':\n            return el.className\n        case 'object': // handle cases where className might be SVGAnimatedString or some other type\n            return el.className.baseVal || el.getAttribute('class') || ''\n        default:\n            // future proof\n            return ''\n    }\n}\n\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\nexport function getSafeText(el) {\n    var elText = ''\n\n    if (shouldCaptureElement(el) && !isSensitiveElement(el) && el.childNodes && el.childNodes.length) {\n        _.each(el.childNodes, function (child) {\n            if (isTextNode(child) && child.textContent) {\n                elText += _.trim(child.textContent)\n                    // scrub potentially sensitive values\n                    .split(/(\\s+)/)\n                    .filter(shouldCaptureValue)\n                    .join('')\n                    // normalize whitespace\n                    .replace(/[\\r\\n]/g, ' ')\n                    .replace(/[ ]+/g, ' ')\n                    // truncate\n                    .substring(0, 255)\n            }\n        })\n    }\n\n    return _.trim(elText)\n}\n\n/*\n * Check whether an element has nodeType Node.ELEMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isElementNode(el) {\n    return el && el.nodeType === 1 // Node.ELEMENT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element is of a given tag type.\n * Due to potential reference discrepancies (such as the webcomponents.js polyfill),\n * we want to match tagNames instead of specific references because something like\n * element === document.body won't always work because element might not be a native\n * element.\n * @param {Element} el - element to check\n * @param {string} tag - tag name (e.g., \"div\")\n * @returns {boolean} whether el is of the given tag type\n */\nexport function isTag(el, tag) {\n    return el && el.tagName && el.tagName.toLowerCase() === tag.toLowerCase()\n}\n\n/*\n * Check whether an element has nodeType Node.TEXT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isTextNode(el) {\n    return el && el.nodeType === 3 // Node.TEXT_NODE - use integer constant for browser portability\n}\n\nexport var usefulElements = ['a', 'button', 'form', 'input', 'select', 'textarea', 'label']\n/*\n * Check whether a DOM event should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @returns {boolean} whether the event should be captured\n */\nexport function shouldCaptureDomEvent(el, event) {\n    if (!el || isTag(el, 'html') || !isElementNode(el)) {\n        return false\n    }\n\n    var parentIsUsefulElement = false\n    var targetElementList = [el]\n    var parentNode = true\n    var curEl = el\n    while (curEl.parentNode && !isTag(curEl, 'body')) {\n        // If element is a shadow root, we skip it\n        if (curEl.parentNode.nodeType === 11) {\n            targetElementList.push(curEl.parentNode.host)\n            curEl = curEl.parentNode.host\n            continue\n        }\n        parentNode = curEl.parentNode\n        if (!parentNode) break\n        if (usefulElements.indexOf(parentNode.tagName.toLowerCase()) > -1) {\n            parentIsUsefulElement = true\n        } else {\n            let compStyles = window.getComputedStyle(parentNode)\n            if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer') {\n                parentIsUsefulElement = true\n            }\n        }\n\n        targetElementList.push(parentNode)\n        curEl = parentNode\n    }\n\n    let compStyles = window.getComputedStyle(el)\n    if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer' && event.type === 'click') {\n        return true\n    }\n\n    var tag = el.tagName.toLowerCase()\n    switch (tag) {\n        case 'html':\n            return false\n        case 'form':\n            return event.type === 'submit'\n        case 'input':\n            return event.type === 'change' || event.type === 'click'\n        case 'select':\n        case 'textarea':\n            return event.type === 'change' || event.type === 'click'\n        default:\n            if (parentIsUsefulElement) return event.type === 'click'\n            return (\n                event.type === 'click' &&\n                (usefulElements.indexOf(tag) > -1 || el.getAttribute('contenteditable') === 'true')\n            )\n    }\n}\n\n/*\n * Check whether a DOM element should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureElement(el) {\n    for (var curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode) {\n        var classes = getClassName(curEl).split(' ')\n        if (_.includes(classes, 'ph-sensitive') || _.includes(classes, 'ph-no-capture')) {\n            return false\n        }\n    }\n\n    if (_.includes(getClassName(el).split(' '), 'ph-include')) {\n        return true\n    }\n\n    // don't include hidden or password fields\n    var type = el.type || ''\n    if (typeof type === 'string') {\n        // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n        switch (type.toLowerCase()) {\n            case 'hidden':\n                return false\n            case 'password':\n                return false\n        }\n    }\n\n    // filter out data from fields that look like sensitive fields\n    var name = el.name || el.id || ''\n    if (typeof name === 'string') {\n        // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n        var sensitiveNameRegex = /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i\n        if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether a DOM element is 'sensitive' and we should only capture limited data\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function isSensitiveElement(el) {\n    // don't send data from inputs or similar elements since there will always be\n    // a risk of clientside javascript placing sensitive data in attributes\n    if (\n        (isTag(el, 'input') && el.type != 'button') ||\n        isTag(el, 'select') ||\n        isTag(el, 'textarea') ||\n        el.getAttribute('contenteditable') === 'true'\n    ) {\n        return true\n    }\n    return false\n}\n\n/*\n * Check whether a string value should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureValue(value) {\n    if (value === null || _.isUndefined(value)) {\n        return false\n    }\n\n    if (typeof value === 'string') {\n        value = _.trim(value)\n\n        // check to see if input value looks like a credit card number\n        // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n        var ccRegex = /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/\n        if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n            return false\n        }\n\n        // check to see if input value looks like a social security number\n        var ssnRegex = /(^\\d{3}-?\\d{2}-?\\d{4}$)/\n        if (ssnRegex.test(value)) {\n            return false\n        }\n    }\n\n    return true\n}\n\nexport function loadScript(scriptUrlToLoad, callback) {\n    var scriptTag = document.createElement('script')\n    scriptTag.type = 'text/javascript'\n    scriptTag.src = scriptUrlToLoad\n    scriptTag.onload = callback\n\n    var scripts = document.getElementsByTagName('script')\n    if (scripts.length > 0) {\n        scripts[0].parentNode.insertBefore(scriptTag, scripts[0])\n    } else {\n        document.body.appendChild(scriptTag)\n    }\n}\n","// Naive rage click implementation: If mouse has not moved than RAGE_CLICK_THRESHOLD_PX\n// over RAGE_CLICK_CLICK_COUNT clicks with max RAGE_CLICK_TIMEOUT_MS between clicks, it's\n// counted as a rage click\nconst RAGE_CLICK_THRESHOLD_PX = 30\nconst RAGE_CLICK_TIMEOUT_MS = 1000\nconst RAGE_CLICK_CLICK_COUNT = 3\n\nexport default class RageClick {\n    constructor(instance, enabled = instance.get_config('rageclick')) {\n        this.clicks = []\n        this.instance = instance\n        this.enabled = enabled\n    }\n\n    click(x, y, timestamp) {\n        if (!this.enabled) {\n            return\n        }\n\n        const lastClick = this.clicks[this.clicks.length - 1]\n        if (\n            lastClick &&\n            Math.abs(x - lastClick.x) + Math.abs(y - lastClick.y) < RAGE_CLICK_THRESHOLD_PX &&\n            timestamp - lastClick.timestamp < RAGE_CLICK_TIMEOUT_MS\n        ) {\n            this.clicks.push({ x, y, timestamp })\n\n            if (this.clicks.length === RAGE_CLICK_CLICK_COUNT) {\n                this.instance.capture('$rageclick')\n            }\n        } else {\n            this.clicks = [{ x, y, timestamp }]\n        }\n    }\n}\n","import { _ } from './utils'\nimport {\n    getClassName,\n    getSafeText,\n    isElementNode,\n    isSensitiveElement,\n    isTag,\n    isTextNode,\n    shouldCaptureDomEvent,\n    shouldCaptureElement,\n    shouldCaptureValue,\n    usefulElements,\n} from './autocapture-utils'\nimport RageClick from './extensions/rageclick'\n\nvar autocapture = {\n    _initializedTokens: [],\n\n    _previousElementSibling: function (el) {\n        if (el.previousElementSibling) {\n            return el.previousElementSibling\n        } else {\n            do {\n                el = el.previousSibling\n            } while (el && !isElementNode(el))\n            return el\n        }\n    },\n\n    _getPropertiesFromElement: function (elem) {\n        var tag_name = elem.tagName.toLowerCase()\n        var props = {\n            tag_name: tag_name,\n        }\n        if (usefulElements.indexOf(tag_name) > -1) props['$el_text'] = getSafeText(elem)\n\n        var classes = getClassName(elem)\n        if (classes.length > 0)\n            props['classes'] = classes.split(' ').filter(function (c) {\n                return c !== ''\n            })\n\n        _.each(elem.attributes, function (attr) {\n            // Only capture attributes we know are safe\n            if (isSensitiveElement(elem) && ['name', 'id', 'class'].indexOf(attr.name) === -1) return\n            if (shouldCaptureValue(attr.value)) {\n                props['attr__' + attr.name] = attr.value\n            }\n        })\n\n        var nthChild = 1\n        var nthOfType = 1\n        var currentElem = elem\n        while ((currentElem = this._previousElementSibling(currentElem))) {\n            // eslint-disable-line no-cond-assign\n            nthChild++\n            if (currentElem.tagName === elem.tagName) {\n                nthOfType++\n            }\n        }\n        props['nth_child'] = nthChild\n        props['nth_of_type'] = nthOfType\n\n        return props\n    },\n\n    _getDefaultProperties: function (eventType) {\n        return {\n            $event_type: eventType,\n            $ce_version: 1,\n        }\n    },\n\n    _extractCustomPropertyValue: function (customProperty) {\n        var propValues = []\n        _.each(document.querySelectorAll(customProperty['css_selector']), function (matchedElem) {\n            var value\n\n            if (['input', 'select'].indexOf(matchedElem.tagName.toLowerCase()) > -1) {\n                value = matchedElem['value']\n            } else if (matchedElem['textContent']) {\n                value = matchedElem['textContent']\n            }\n\n            if (shouldCaptureValue(value)) {\n                propValues.push(value)\n            }\n        })\n        return propValues.join(', ')\n    },\n\n    _getCustomProperties: function (targetElementList) {\n        var props = {}\n        _.each(\n            this._customProperties,\n            function (customProperty) {\n                _.each(\n                    customProperty['event_selectors'],\n                    function (eventSelector) {\n                        var eventElements = document.querySelectorAll(eventSelector)\n                        _.each(\n                            eventElements,\n                            function (eventElement) {\n                                if (_.includes(targetElementList, eventElement) && shouldCaptureElement(eventElement)) {\n                                    props[customProperty['name']] = this._extractCustomPropertyValue(customProperty)\n                                }\n                            },\n                            this\n                        )\n                    },\n                    this\n                )\n            },\n            this\n        )\n        return props\n    },\n\n    _getEventTarget: function (e) {\n        // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n        if (typeof e.target === 'undefined') {\n            return e.srcElement\n        } else {\n            if (e.target.shadowRoot) {\n                return e.composedPath()[0]\n            }\n            return e.target\n        }\n    },\n\n    _captureEvent: function (e, instance) {\n        /*** Don't mess with this code without running IE8 tests on it ***/\n        var target = this._getEventTarget(e)\n        if (isTextNode(target)) {\n            // defeat Safari bug (see: http://www.quirksmode.org/js/events_properties.html)\n            target = target.parentNode\n        }\n\n        if (e.type === 'click') {\n            this.rageclicks.click(e.clientX, e.clientY, new Date().getTime())\n        }\n\n        if (shouldCaptureDomEvent(target, e)) {\n            var targetElementList = [target]\n            var curEl = target\n            while (curEl.parentNode && !isTag(curEl, 'body')) {\n                if (curEl.parentNode.nodeType === 11) {\n                    targetElementList.push(curEl.parentNode.host)\n                    curEl = curEl.parentNode.host\n                    continue\n                }\n                targetElementList.push(curEl.parentNode)\n                curEl = curEl.parentNode\n            }\n\n            var elementsJson = []\n            var href,\n                explicitNoCapture = false\n            _.each(\n                targetElementList,\n                function (el) {\n                    var shouldCaptureEl = shouldCaptureElement(el)\n\n                    // if the element or a parent element is an anchor tag\n                    // include the href as a property\n                    if (el.tagName.toLowerCase() === 'a') {\n                        href = el.getAttribute('href')\n                        href = shouldCaptureEl && shouldCaptureValue(href) && href\n                    }\n\n                    // allow users to programmatically prevent capturing of elements by adding class 'ph-no-capture'\n                    var classes = getClassName(el).split(' ')\n                    if (_.includes(classes, 'ph-no-capture')) {\n                        explicitNoCapture = true\n                    }\n\n                    elementsJson.push(this._getPropertiesFromElement(el))\n                },\n                this\n            )\n\n            elementsJson[0]['$el_text'] = getSafeText(target)\n\n            if (href) {\n                elementsJson[0]['attr__href'] = href\n            }\n\n            if (explicitNoCapture) {\n                return false\n            }\n\n            var props = _.extend(\n                this._getDefaultProperties(e.type),\n                {\n                    $elements: elementsJson,\n                },\n                this._getCustomProperties(targetElementList)\n            )\n\n            instance.capture('$autocapture', props)\n            return true\n        }\n    },\n\n    // only reason is to stub for unit tests\n    // since you can't override window.location props\n    _navigate: function (href) {\n        window.location.href = href\n    },\n\n    _addDomEventHandlers: function (instance) {\n        var handler = _.bind(function (e) {\n            e = e || window.event\n            this._captureEvent(e, instance)\n        }, this)\n        _.register_event(document, 'submit', handler, false, true)\n        _.register_event(document, 'change', handler, false, true)\n        _.register_event(document, 'click', handler, false, true)\n    },\n\n    _customProperties: {},\n    init: function (instance) {\n        instance.toolbar.maybeLoadEditor()\n\n        var token = instance.get_config('token')\n        if (this._initializedTokens.indexOf(token) > -1) {\n            console.log('autocapture already initialized for token \"' + token + '\"')\n            return\n        }\n        this._initializedTokens.push(token)\n        this.rageclicks = new RageClick(instance)\n\n        var parseDecideResponse = _.bind(function (response) {\n            if (!(document && document.body)) {\n                console.log('document not ready yet, trying again in 500 milliseconds...')\n                setTimeout(function () {\n                    parseDecideResponse(response)\n                }, 500)\n                return\n            }\n\n            instance.toolbar.afterDecideResponse(response)\n            instance.sessionRecording.afterDecideResponse(response)\n\n            if (response && response['config'] && response['config']['enable_collect_everything'] === true) {\n                if (response['custom_properties']) {\n                    this._customProperties = response['custom_properties']\n                }\n                this._addDomEventHandlers(instance)\n            } else {\n                instance['__autocapture_enabled'] = false\n            }\n\n            if (response['featureFlags']) {\n                instance.persistence &&\n                    instance.persistence.register({ $active_feature_flags: response['featureFlags'] })\n            } else {\n                instance.persistence && instance.persistence.unregister('$active_feature_flags')\n            }\n\n            if (response['supportedCompression']) {\n                let compression = {}\n                for (const method of response['supportedCompression']) {\n                    compression[method] = true\n                }\n                instance['compression'] = compression\n            } else {\n                instance['compression'] = {}\n            }\n        }, this)\n\n        var json_data = JSON.stringify({\n            token: token,\n            distinct_id: instance.get_distinct_id(),\n        })\n        var encoded_data = _.base64Encode(json_data)\n        instance._send_request(\n            instance.get_config('api_host') + '/decide/',\n            { data: encoded_data },\n            { method: 'POST' },\n            instance._prepare_callback(parseDecideResponse)\n        )\n    },\n\n    // this is a mechanism to ramp up CE with no server-side interaction.\n    // when CE is active, every page load results in a decide request. we\n    // need to gently ramp this up so we don't overload decide. this decides\n    // deterministically if CE is enabled for this project by modding the char\n    // value of the project token.\n    enabledForProject: function (token, numBuckets, numEnabledBuckets) {\n        numBuckets = !_.isUndefined(numBuckets) ? numBuckets : 10\n        numEnabledBuckets = !_.isUndefined(numEnabledBuckets) ? numEnabledBuckets : 10\n        var charCodeSum = 0\n        for (var i = 0; i < token.length; i++) {\n            charCodeSum += token.charCodeAt(i)\n        }\n        return charCodeSum % numBuckets < numEnabledBuckets\n    },\n\n    isBrowserSupported: function () {\n        return _.isFunction(document.querySelectorAll)\n    },\n}\n\n_.bind_instance_methods(autocapture)\n_.safewrap_instance_methods(autocapture)\n\nexport { autocapture }\n","import { console } from './utils'\n\nvar DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i\n\n// Methods partially borrowed from quirksmode.org/js/cookies.html\nexport const cookieStore = {\n    get: function (name) {\n        try {\n            var nameEQ = name + '='\n            var ca = document.cookie.split(';')\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i]\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1, c.length)\n                }\n                if (c.indexOf(nameEQ) === 0) {\n                    return decodeURIComponent(c.substring(nameEQ.length, c.length))\n                }\n            }\n        } catch (err) {}\n        return null\n    },\n\n    parse: function (name) {\n        var cookie\n        try {\n            cookie = JSON.parse(cookieStore.get(name)) || {}\n        } catch (err) {\n            // noop\n        }\n        return cookie\n    },\n\n    set: function (name, value, days, cross_subdomain, is_secure) {\n        try {\n            var cdomain = '',\n                expires = '',\n                secure = ''\n\n            if (cross_subdomain) {\n                var matches = document.location.hostname.match(DOMAIN_MATCH_REGEX),\n                    domain = matches ? matches[0] : ''\n\n                cdomain = domain ? '; domain=.' + domain : ''\n            }\n\n            if (days) {\n                var date = new Date()\n                date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000)\n                expires = '; expires=' + date.toGMTString()\n            }\n\n            if (is_secure) {\n                secure = '; secure'\n            }\n\n            var new_cookie_val = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure\n            document.cookie = new_cookie_val\n            return new_cookie_val\n        } catch (err) {\n            return\n        }\n    },\n\n    remove: function (name, cross_subdomain) {\n        try {\n            cookieStore.set(name, '', -1, cross_subdomain)\n        } catch (err) {\n            return\n        }\n    },\n}\n\nvar _localStorage_supported = null\nexport const localStore = {\n    is_supported: function () {\n        if (_localStorage_supported !== null) {\n            return _localStorage_supported\n        }\n\n        var supported = true\n        try {\n            var key = '__mplssupport__',\n                val = 'xyz'\n            localStore.set(key, val)\n            if (localStore.get(key) !== val) {\n                supported = false\n            }\n            localStore.remove(key)\n        } catch (err) {\n            supported = false\n        }\n        if (!supported) {\n            console.error('localStorage unsupported; falling back to cookie store')\n        }\n\n        _localStorage_supported = supported\n        return supported\n    },\n\n    error: function (msg) {\n        console.error('localStorage error: ' + msg)\n    },\n\n    get: function (name) {\n        try {\n            return window.localStorage.getItem(name)\n        } catch (err) {\n            localStore.error(err)\n        }\n        return null\n    },\n\n    parse: function (name) {\n        try {\n            return JSON.parse(localStore.get(name)) || {}\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value) {\n        try {\n            window.localStorage.setItem(name, value)\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n\n    remove: function (name) {\n        try {\n            window.localStorage.removeItem(name)\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n}\n\nconst memoryStorage = {}\n\n// Storage that only lasts the length of the pageview if we don't want to use cookies\nexport const memoryStore = {\n    is_supported: function () {\n        return true\n    },\n\n    error: function (msg) {\n        console.error('memoryStorage error: ' + msg)\n    },\n\n    parse: function (name) {\n        return memoryStorage[name] || null\n    },\n\n    set: function (name, value) {\n        memoryStorage[name] = value\n    },\n\n    remove: function (name) {\n        delete memoryStorage[name]\n    },\n}\n","/**\n * GDPR utils\n *\n * The General Data Protection Regulation (GDPR) is a regulation in EU law on data protection\n * and privacy for all individuals within the European Union. It addresses the export of personal\n * data outside the EU. The GDPR aims primarily to give control back to citizens and residents\n * over their personal data and to simplify the regulatory environment for international business\n * by unifying the regulation within the EU.\n *\n * This set of utilities is intended to enable opt in/out functionality in the PostHog JS SDK.\n * These functions are used internally by the SDK and are not intended to be publicly exposed.\n */\n\nimport { _, window } from './utils'\nimport { cookieStore, localStore } from './storage'\n\n/**\n * A function used to capture a PostHog event (e.g. PostHogLib.capture)\n * @callback captureFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after capturing the event.\n */\n\n/** Public **/\n\nvar GDPR_DEFAULT_PERSISTENCE_PREFIX = '__ph_opt_in_out_'\n\n/**\n * Opt the user in to data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for capturing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for capturing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captured along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nexport function optIn(token, options) {\n    _optInOut(true, token, options)\n}\n\n/**\n * Opt the user out of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\nexport function optOut(token, options) {\n    _optInOut(false, token, options)\n}\n\n/**\n * Check whether the user has opted in to data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\nexport function hasOptedIn(token, options) {\n    return _getStorageValue(token, options) === '1'\n}\n\n/**\n * Check whether the user has opted out of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {boolean} [options.respectDnt] - flag to take browser DNT setting into account\n * @returns {boolean} whether the user has opted out of the given opt type\n */\nexport function hasOptedOut(token, options) {\n    if (_hasDoNotTrackFlagOn(options)) {\n        return true\n    }\n    return _getStorageValue(token, options) === '0'\n}\n\n/**\n * Wrap a PostHogLib method with a check for whether the user is opted out of data capturing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nexport function addOptOutCheckPostHogLib(method, silenceErrors) {\n    return _addOptOutCheck(\n        method,\n        function (name) {\n            return this.get_config(name)\n        },\n        silenceErrors\n    )\n}\n\n/**\n * Wrap a PostHogPeople method with a check for whether the user is opted out of data capturing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nexport function addOptOutCheckPostHogPeople(method, silenceErrors) {\n    return _addOptOutCheck(\n        method,\n        function (name) {\n            return this._get_config(name)\n        },\n        silenceErrors\n    )\n}\n\n/**\n * Clear the user's opt in/out status of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nexport function clearOptInOut(token, options) {\n    options = options || {}\n    _getStorage(options).remove(_getStorageKey(token, options), !!options.crossSubdomainCookie, options.cookieDomain)\n}\n\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either cookieStore or localStore\n */\nfunction _getStorage(options) {\n    options = options || {}\n    return options.persistenceType === 'localStorage' ? localStore : cookieStore\n}\n\n/**\n * Get the name of the cookie that is used for the given opt type (capturing, cookie, etc.)\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\nfunction _getStorageKey(token, options) {\n    options = options || {}\n    return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token\n}\n\n/**\n * Get the value of the cookie that is used for the given opt type (capturing, cookie, etc.)\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\nfunction _getStorageValue(token, options) {\n    return _getStorage(options).get(_getStorageKey(token, options))\n}\n\n/**\n * Check whether the user has set the DNT/doNotTrack setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @param {boolean} [options.respectDnt] - flag to take browser DNT setting into account\n * @returns {boolean} whether the DNT setting is true\n */\nfunction _hasDoNotTrackFlagOn(options) {\n    if (options && options.respectDnt) {\n        var win = (options && options.window) || window\n        var nav = win['navigator'] || {}\n        var hasDntOn = false\n        _.each(\n            [\n                nav['doNotTrack'], // standard\n                nav['msDoNotTrack'],\n                win['doNotTrack'],\n            ],\n            function (dntValue) {\n                if (_.includes([true, 1, '1', 'yes'], dntValue)) {\n                    hasDntOn = true\n                }\n            }\n        )\n        return hasDntOn\n    }\n    return false\n}\n\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for capturing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for capturing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captured along with the opt-in action\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction _optInOut(optValue, token, options) {\n    if (!_.isString(token) || !token.length) {\n        console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token')\n        return\n    }\n\n    options = options || {}\n\n    _getStorage(options).set(\n        _getStorageKey(token, options),\n        optValue ? 1 : 0,\n        _.isNumber(options.cookieExpiration) ? options.cookieExpiration : null,\n        !!options.crossSubdomainCookie,\n        !!options.secureCookie,\n        !!options.crossSiteCookie,\n        options.cookieDomain\n    )\n\n    if (options.capture && optValue) {\n        // only capture event if opting in (optValue=true)\n        options.capture(options.captureEventName || '$opt_in', options.captureProperties, {\n            send_immediately: true,\n        })\n    }\n}\n\n/**\n * Wrap a method with a check for whether the user is opted out of data capturing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param {function} getConfigValue - getter function for the PostHog API token and other options to be used with opt-out check\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction _addOptOutCheck(method, getConfigValue, silenceErrors) {\n    return function () {\n        var optedOut = false\n\n        try {\n            var token = getConfigValue.call(this, 'token')\n            var respectDnt = getConfigValue.call(this, 'respect_dnt')\n            var persistenceType = getConfigValue.call(this, 'opt_out_capturing_persistence_type')\n            var persistencePrefix = getConfigValue.call(this, 'opt_out_capturing_cookie_prefix')\n            var win = getConfigValue.call(this, 'window') // used to override window during browser tests\n\n            if (token) {\n                // if there was an issue getting the token, continue method execution as normal\n                optedOut = hasOptedOut(token, {\n                    respectDnt,\n                    persistenceType,\n                    persistencePrefix,\n                    window: win,\n                })\n            }\n        } catch (err) {\n            if (!silenceErrors) {\n                console.error('Unexpected error when checking capturing opt-out status: ' + err)\n            }\n        }\n\n        if (!optedOut) {\n            return method.apply(this, arguments)\n        }\n\n        var callback = arguments[arguments.length - 1]\n        if (typeof callback === 'function') {\n            callback(0)\n        }\n\n        return\n    }\n}\n","/* eslint camelcase: \"off\" */\n\nimport { _ } from './utils'\n\n/** @const */ var SET_ACTION = '$set'\n/** @const */ var SET_ONCE_ACTION = '$set_once'\n\n// Internal methods for posthog.people API.\n// These methods shouldn't involve network I/O.\nvar apiActions = {\n    set_action: function (prop, to) {\n        var data = {}\n        var $set = {}\n        if (_.isObject(prop)) {\n            _.each(\n                prop,\n                function (v, k) {\n                    if (!this._is_reserved_property(k)) {\n                        $set[k] = v\n                    }\n                },\n                this\n            )\n        } else {\n            $set[prop] = to\n        }\n\n        data[SET_ACTION] = $set\n        return data\n    },\n\n    set_once_action: function (prop, to) {\n        var data = {}\n        var $set_once = {}\n        if (_.isObject(prop)) {\n            _.each(\n                prop,\n                function (v, k) {\n                    if (!this._is_reserved_property(k)) {\n                        $set_once[k] = v\n                    }\n                },\n                this\n            )\n        } else {\n            $set_once[prop] = to\n        }\n        data[SET_ONCE_ACTION] = $set_once\n        return data\n    },\n}\n\nexport { SET_ACTION, apiActions }\n","/* eslint camelcase: \"off\" */\nimport { addOptOutCheckPostHogPeople } from './gdpr-utils'\nimport { SET_ACTION, apiActions } from './api-actions'\nimport { _ } from './utils'\n\n/**\n * PostHog People Object\n * @constructor\n */\nvar PostHogPeople = function () {}\n\n_.extend(PostHogPeople.prototype, apiActions)\n\nPostHogPeople.prototype._init = function (posthog_instance) {\n    this._posthog = posthog_instance\n}\n\n/*\n * Set properties on a user record.\n *\n * ### Usage:\n *\n *     posthog.people.set('gender', 'm');\n *\n *     // or set multiple properties at once\n *     posthog.people.set({\n *         'Company': 'Acme',\n *         'Plan': 'Premium',\n *         'Upgrade date': new Date()\n *     });\n *     // properties can be strings, integers, dates, or lists\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after captureing the event.\n */\nPostHogPeople.prototype.set = addOptOutCheckPostHogPeople(function (prop, to, callback) {\n    var data = this.set_action(prop, to)\n    if (_.isObject(prop)) {\n        callback = to\n    }\n    // make sure that the referrer info has been updated and saved\n    if (this._get_config('save_referrer')) {\n        this._posthog['persistence'].update_referrer_info(document.referrer)\n    }\n\n    // update $set object with default people properties\n    data[SET_ACTION] = _.extend(\n        {},\n        _.info.people_properties(),\n        this._posthog['persistence'].get_referrer_info(),\n        data[SET_ACTION]\n    )\n    return this._send_request(data, callback)\n})\n\n/*\n * Set properties on a user record, only if they do not yet exist.\n * This will not overwrite previous people property values, unlike\n * people.set().\n *\n * ### Usage:\n *\n *     posthog.people.set_once('First Login Date', new Date());\n *\n *     // or set multiple properties at once\n *     posthog.people.set_once({\n *         'First Login Date': new Date(),\n *         'Starting Plan': 'Premium'\n *     });\n *\n *     // properties can be strings, integers or dates\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after captureing the event.\n */\nPostHogPeople.prototype.set_once = addOptOutCheckPostHogPeople(function (prop, to, callback) {\n    var data = this.set_once_action(prop, to)\n    if (_.isObject(prop)) {\n        callback = to\n    }\n    return this._send_request(data, callback)\n})\n\nPostHogPeople.prototype.toString = function () {\n    return this._posthog.toString() + '.people'\n}\n\nPostHogPeople.prototype._send_request = function (data, callback) {\n    data['$token'] = this._get_config('token')\n    data['$distinct_id'] = this._posthog.get_distinct_id()\n    var device_id = this._posthog.get_property('$device_id')\n    var user_id = this._posthog.get_property('$user_id')\n    var had_persisted_distinct_id = this._posthog.get_property('$had_persisted_distinct_id')\n    if (device_id) {\n        data['$device_id'] = device_id\n    }\n    if (user_id) {\n        data['$user_id'] = user_id\n    }\n    if (had_persisted_distinct_id) {\n        data['$had_persisted_distinct_id'] = had_persisted_distinct_id\n    }\n\n    var date_encoded_data = _.encodeDates(data)\n    var truncated_data = _.copyAndTruncateStrings(date_encoded_data, 255)\n    var json_data = JSON.stringify(date_encoded_data)\n    var encoded_data = _.base64Encode(json_data)\n\n    this._posthog._send_request(\n        this._get_config('api_host') + '/engage/',\n        { data: encoded_data },\n        {},\n        this._posthog._prepare_callback(callback, truncated_data)\n    )\n\n    return truncated_data\n}\n\nPostHogPeople.prototype._get_config = function (conf_var) {\n    return this._posthog.get_config(conf_var)\n}\n\nPostHogPeople.prototype._is_reserved_property = function (prop) {\n    return (\n        prop === '$distinct_id' ||\n        prop === '$token' ||\n        prop === '$device_id' ||\n        prop === '$user_id' ||\n        prop === '$had_persisted_distinct_id'\n    )\n}\n\n// PostHogPeople Exports\nPostHogPeople.prototype['set'] = PostHogPeople.prototype.set\nPostHogPeople.prototype['set_once'] = PostHogPeople.prototype.set_once\nPostHogPeople.prototype['toString'] = PostHogPeople.prototype.toString\n\nexport { PostHogPeople }\n","import { _ } from './utils'\n\nexport class PostHogFeatureFlags {\n    constructor(instance) {\n        this.instance = instance\n        this._override_warning = false\n        this.flagCallReported = {}\n    }\n\n    getFlags() {\n        if (this.instance.get_property('$override_feature_flags')) {\n            if (!this._override_warning)\n                console.warn(\n                    '[PostHog] Overriding feature flags! Feature flags from server were: ' +\n                        JSON.stringify(this.instance.get_property('$active_feature_flags'))\n                )\n            this._override_warning = true\n            return this.instance.get_property('$override_feature_flags')\n        }\n        return this.instance.get_property('$active_feature_flags')\n    }\n\n    reloadFeatureFlags() {\n        const parseDecideResponse = (response) => {\n            if (response['featureFlags']) {\n                this.instance.persistence &&\n                    this.instance.persistence.register({ $active_feature_flags: response['featureFlags'] })\n            } else {\n                this.instance.persistence && this.instance.persistence.unregister('$active_feature_flags')\n            }\n        }\n\n        const token = this.instance.get_config('token')\n        const json_data = JSON.stringify({\n            token: token,\n            distinct_id: this.instance.get_distinct_id(),\n        })\n        const encoded_data = _.base64Encode(json_data)\n        this.instance._send_request(\n            this.instance.get_config('api_host') + '/decide/',\n            { data: encoded_data },\n            { method: 'POST' },\n            this.instance._prepare_callback(parseDecideResponse)\n        )\n    }\n\n    /*\n     * See if feature flag is enabled for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.isFeatureEnabled('beta-feature')) { // do something }\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    isFeatureEnabled(key, options = {}) {\n        if (!this.getFlags()) {\n            console.warn('isFeatureEnabled for key \"' + key + '\" failed. Feature flags didn\\'t load in time.')\n            return false\n        }\n        const flagEnabled = this.getFlags().indexOf(key) > -1\n        if ((options.send_event || !('send_event' in options)) && !this.flagCallReported[key]) {\n            this.flagCallReported[key] = true\n            this.instance.capture('$feature_flag_called', { $feature_flag: key, $feature_flag_response: flagEnabled })\n        }\n        return flagEnabled\n    }\n\n    /*\n     * Override feature flags for debugging.\n     *\n     * ### Usage:\n     *\n     *     posthog.feature_flags.override(['beta-feature']) or posthog.feature_flags.override(false)\n     *\n     * @param {Object|String} prop Flags to override with.\n     */\n    override(flags) {\n        if (flags === false) return this.instance.persistence.unregister('$override_feature_flags')\n        this.instance.persistence.register('$override_feature_flags', flags)\n    }\n}\n","/* eslint camelcase: \"off\" */\n\nimport Config from './config'\nimport { _, console } from './utils'\nimport { cookieStore, localStore, memoryStore } from './storage'\n\n/*\n * Constants\n */\n/** @const */ var SET_QUEUE_KEY = '__mps'\n/** @const */ var SET_ONCE_QUEUE_KEY = '__mpso'\n/** @const */ var UNSET_QUEUE_KEY = '__mpus'\n/** @const */ var ADD_QUEUE_KEY = '__mpa'\n/** @const */ var APPEND_QUEUE_KEY = '__mpap'\n/** @const */ var REMOVE_QUEUE_KEY = '__mpr'\n/** @const */ var UNION_QUEUE_KEY = '__mpu'\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\n/** @const */ var PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id'\n/** @const */ var ALIAS_ID_KEY = '__alias'\n/** @const */ var CAMPAIGN_IDS_KEY = '__cmpns'\n/** @const */ var EVENT_TIMERS_KEY = '__timers'\n/** @const */ var SESSION_RECORDING_ENABLED = '$session_recording_enabled'\n/** @const */ var SESSION_ID = '$sesid'\n/** @const */ var RESERVED_PROPERTIES = [\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    UNSET_QUEUE_KEY,\n    ADD_QUEUE_KEY,\n    APPEND_QUEUE_KEY,\n    REMOVE_QUEUE_KEY,\n    UNION_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY,\n    SESSION_RECORDING_ENABLED,\n    SESSION_ID,\n]\n\n/**\n * PostHog Persistence Object\n * @constructor\n */\nvar PostHogPersistence = function (config) {\n    this['props'] = {}\n    this.campaign_params_saved = false\n    this['featureFlagEventHandlers'] = []\n\n    if (config['persistence_name']) {\n        this.name = 'ph_' + config['persistence_name']\n    } else {\n        this.name = 'ph_' + config['token'] + '_posthog'\n    }\n\n    var storage_type = config['persistence']\n    if (storage_type !== 'cookie' && storage_type !== 'localStorage' && storage_type !== 'memory') {\n        console.critical('Unknown persistence type ' + storage_type + '; falling back to cookie')\n        storage_type = config['persistence'] = 'cookie'\n    }\n\n    if (storage_type === 'localStorage' && localStore.is_supported()) {\n        this.storage = localStore\n    } else if (storage_type === 'memory') {\n        this.storage = memoryStore\n    } else {\n        this.storage = cookieStore\n    }\n\n    this.load()\n    this.update_config(config)\n    this.upgrade(config)\n    this.save()\n}\n\nPostHogPersistence.prototype.addFeatureFlagsHandler = function (handler) {\n    this.featureFlagEventHandlers.push(handler)\n    return true\n}\n\nPostHogPersistence.prototype.receivedFeatureFlags = function (flags) {\n    this.featureFlagEventHandlers.forEach((handler) => handler(flags))\n}\n\nPostHogPersistence.prototype.properties = function () {\n    var p = {}\n    // Filter out reserved properties\n    _.each(this['props'], function (v, k) {\n        if (!_.include(RESERVED_PROPERTIES, k)) {\n            p[k] = v\n        }\n    })\n    return p\n}\n\nPostHogPersistence.prototype.load = function () {\n    if (this.disabled) {\n        return\n    }\n\n    var entry = this.storage.parse(this.name)\n\n    if (entry) {\n        this['props'] = _.extend({}, entry)\n    }\n}\n\nPostHogPersistence.prototype.upgrade = function (config) {\n    var upgrade_from_old_lib = config['upgrade'],\n        old_cookie_name,\n        old_cookie\n\n    if (upgrade_from_old_lib) {\n        old_cookie_name = 'ph_super_properties'\n        // Case where they had a custom cookie name before.\n        if (typeof upgrade_from_old_lib === 'string') {\n            old_cookie_name = upgrade_from_old_lib\n        }\n\n        old_cookie = this.storage.parse(old_cookie_name)\n\n        // remove the cookie\n        this.storage.remove(old_cookie_name)\n        this.storage.remove(old_cookie_name, true)\n\n        if (old_cookie) {\n            this['props'] = _.extend(this['props'], old_cookie['all'], old_cookie['events'])\n        }\n    }\n\n    if (!config['cookie_name'] && config['name'] !== 'posthog') {\n        // special case to handle people with cookies of the form\n        // ph_TOKEN_INSTANCENAME from the first release of this library\n        old_cookie_name = 'ph_' + config['token'] + '_' + config['name']\n        old_cookie = this.storage.parse(old_cookie_name)\n\n        if (old_cookie) {\n            this.storage.remove(old_cookie_name)\n            this.storage.remove(old_cookie_name, true)\n\n            // Save the prop values that were in the cookie from before -\n            // this should only happen once as we delete the old one.\n            this.register_once(old_cookie)\n        }\n    }\n\n    if (this.storage !== cookieStore) {\n        old_cookie = cookieStore.parse(this.name)\n\n        cookieStore.remove(this.name)\n        cookieStore.remove(this.name, true)\n\n        if (old_cookie) {\n            this.register_once(old_cookie)\n        }\n    }\n}\n\nPostHogPersistence.prototype.save = function () {\n    if (this.disabled) {\n        return\n    }\n    this._expire_notification_campaigns()\n    this.storage.set(this.name, JSON.stringify(this['props']), this.expire_days, this.cross_subdomain, this.secure)\n}\n\nPostHogPersistence.prototype.remove = function () {\n    // remove both domain and subdomain cookies\n    this.storage.remove(this.name, false)\n    this.storage.remove(this.name, true)\n}\n\n// removes the storage entry and deletes all loaded data\n// forced name for tests\nPostHogPersistence.prototype.clear = function () {\n    this.remove()\n    this['props'] = {}\n}\n\n/**\n * @param {Object} props\n * @param {*=} default_value\n * @param {number=} days\n */\nPostHogPersistence.prototype.register_once = function (props, default_value, days) {\n    if (_.isObject(props)) {\n        if (typeof default_value === 'undefined') {\n            default_value = 'None'\n        }\n        this.expire_days = typeof days === 'undefined' ? this.default_expiry : days\n        if (props && props.$active_feature_flags) {\n            this.receivedFeatureFlags(props.$active_feature_flags)\n        }\n\n        _.each(\n            props,\n            function (val, prop) {\n                if (!this['props'].hasOwnProperty(prop) || this['props'][prop] === default_value) {\n                    this['props'][prop] = val\n                }\n            },\n            this\n        )\n\n        this.save()\n\n        return true\n    }\n    return false\n}\n\n/**\n * @param {Object} props\n * @param {number=} days\n */\nPostHogPersistence.prototype.register = function (props, days) {\n    if (_.isObject(props)) {\n        this.expire_days = typeof days === 'undefined' ? this.default_expiry : days\n        if (props && props.$active_feature_flags) {\n            this.receivedFeatureFlags(props.$active_feature_flags)\n        }\n\n        _.extend(this['props'], props)\n\n        this.save()\n\n        return true\n    }\n    return false\n}\n\nPostHogPersistence.prototype.unregister = function (prop) {\n    if (prop in this['props']) {\n        delete this['props'][prop]\n        this.save()\n\n        if (prop === '$active_feature_flags') {\n            this.receivedFeatureFlags([])\n        }\n    }\n}\n\nPostHogPersistence.prototype._expire_notification_campaigns = _.safewrap(function () {\n    var campaigns_shown = this['props'][CAMPAIGN_IDS_KEY],\n        EXPIRY_TIME = Config.DEBUG ? 60 * 1000 : 60 * 60 * 1000 // 1 minute (Config.DEBUG) / 1 hour (PDXN)\n    if (!campaigns_shown) {\n        return\n    }\n    for (var campaign_id in campaigns_shown) {\n        if (1 * new Date() - campaigns_shown[campaign_id] > EXPIRY_TIME) {\n            delete campaigns_shown[campaign_id]\n        }\n    }\n    if (_.isEmptyObject(campaigns_shown)) {\n        delete this['props'][CAMPAIGN_IDS_KEY]\n    }\n})\n\nPostHogPersistence.prototype.update_campaign_params = function () {\n    if (!this.campaign_params_saved) {\n        this.register_once(_.info.campaignParams())\n        this.campaign_params_saved = true\n    }\n}\n\nPostHogPersistence.prototype.update_search_keyword = function (referrer) {\n    this.register(_.info.searchInfo(referrer))\n}\n\n// EXPORTED METHOD, we test this directly.\nPostHogPersistence.prototype.update_referrer_info = function (referrer) {\n    // If referrer doesn't exist, we want to note the fact that it was type-in traffic.\n    // Register once, so first touch\n    this.register_once(\n        {\n            $initial_referrer: referrer || '$direct',\n            $initial_referring_domain: _.info.referringDomain(referrer) || '$direct',\n        },\n        ''\n    )\n    // Register the current referrer but override if it's different, hence register\n    this.register({\n        $referrer: referrer || this['props']['$referrer'] || '$direct',\n        $referring_domain: _.info.referringDomain(referrer) || this['props']['$referring_domain'] || '$direct',\n    })\n}\n\nPostHogPersistence.prototype.get_referrer_info = function () {\n    return _.strip_empty_properties({\n        $initial_referrer: this['props']['$initial_referrer'],\n        $initial_referring_domain: this['props']['$initial_referring_domain'],\n    })\n}\n\n// safely fills the passed in object with stored properties,\n// does not override any properties defined in both\n// returns the passed in object\nPostHogPersistence.prototype.safe_merge = function (props) {\n    _.each(this['props'], function (val, prop) {\n        if (!(prop in props)) {\n            props[prop] = val\n        }\n    })\n\n    return props\n}\n\nPostHogPersistence.prototype.update_config = function (config) {\n    this.default_expiry = this.expire_days = config['cookie_expiration']\n    this.set_disabled(config['disable_persistence'])\n    this.set_cross_subdomain(config['cross_subdomain_cookie'])\n    this.set_secure(config['secure_cookie'])\n}\n\nPostHogPersistence.prototype.set_disabled = function (disabled) {\n    this.disabled = disabled\n    if (this.disabled) {\n        this.remove()\n    } else {\n        this.save()\n    }\n}\n\nPostHogPersistence.prototype.set_cross_subdomain = function (cross_subdomain) {\n    if (cross_subdomain !== this.cross_subdomain) {\n        this.cross_subdomain = cross_subdomain\n        this.remove()\n        this.save()\n    }\n}\n\nPostHogPersistence.prototype.get_cross_subdomain = function () {\n    return this.cross_subdomain\n}\n\nPostHogPersistence.prototype.set_secure = function (secure) {\n    if (secure !== this.secure) {\n        this.secure = secure ? true : false\n        this.remove()\n        this.save()\n    }\n}\n\nPostHogPersistence.prototype.set_event_timer = function (event_name, timestamp) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {}\n    timers[event_name] = timestamp\n    this['props'][EVENT_TIMERS_KEY] = timers\n    this.save()\n}\n\nPostHogPersistence.prototype.remove_event_timer = function (event_name) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {}\n    var timestamp = timers[event_name]\n    if (!_.isUndefined(timestamp)) {\n        delete this['props'][EVENT_TIMERS_KEY][event_name]\n        this.save()\n    }\n    return timestamp\n}\n\nexport {\n    PostHogPersistence,\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY,\n    SESSION_RECORDING_ENABLED,\n    SESSION_ID,\n}\n","import { SESSION_ID } from '../posthog-persistence'\nimport { _ } from '../utils'\n\nconst SESSION_CHANGE_THRESHOLD = 30 * 60 * 1000 // 30 mins\n\nexport default (persistence, timestamp) => {\n    let [lastTimestamp, sessionId] = persistence['props'][SESSION_ID] || [0, null]\n\n    if (Math.abs(timestamp - lastTimestamp) > SESSION_CHANGE_THRESHOLD) {\n        sessionId = _.UUID()\n    }\n\n    persistence.register({ [SESSION_ID]: [timestamp, sessionId] })\n    return sessionId\n}\n","import { loadScript } from '../autocapture-utils'\nimport { _ } from '../utils'\nimport { SESSION_RECORDING_ENABLED } from '../posthog-persistence'\nimport sessionIdGenerator from './sessionid'\nimport Config from '../config'\n\nconst BASE_ENDPOINT = '/e/'\n\nexport class SessionRecording {\n    constructor(instance) {\n        this.instance = instance\n        this.captureStarted = false\n        this.snapshots = []\n        this.emit = false\n        this.endpoint = BASE_ENDPOINT\n    }\n\n    startRecordingIfEnabled() {\n        if (this.instance.get_property(SESSION_RECORDING_ENABLED)) {\n            this._startCapture()\n        }\n    }\n\n    afterDecideResponse(response) {\n        if (this.instance.persistence) {\n            this.instance.persistence.register({ [SESSION_RECORDING_ENABLED]: !!response['sessionRecording'] })\n        }\n\n        if (response['sessionRecording']) {\n            if (response['sessionRecording'].endpoint) {\n                this.endpoint = response['sessionRecording'].endpoint\n            }\n            this.submitRecordings()\n        }\n    }\n\n    submitRecordings() {\n        this.emit = true\n        this._startCapture()\n        this.snapshots.forEach((properties) => this._captureSnapshot(properties))\n    }\n\n    _startCapture() {\n        // According to the rrweb docs, rrweb is not supported on IE11 and below:\n        // \"rrweb does not support IE11 and below because it uses the MutationObserver API which was supported by these browsers.\"\n        // https://github.com/rrweb-io/rrweb/blob/master/guide.md#compatibility-note\n        //\n        // However, MutationObserver does exist on IE11, it just doesn't work well and does not detect all changes.\n        // Instead, when we load \"recorder.js\", the first JS error is about \"Object.assign\" being undefined.\n        // Thus instead of MutationObserver, we look for this function and block recording if it's undefined.\n        if (typeof Object.assign === 'undefined') {\n            return\n        }\n        if (!this.captureStarted && !this.instance.get_config('disable_session_recording')) {\n            this.captureStarted = true\n            loadScript(\n                this.instance.get_config('api_host') + '/static/recorder.js?v=' + Config.LIB_VERSION,\n                _.bind(this._onScriptLoaded, this)\n            )\n        }\n    }\n\n    _onScriptLoaded() {\n        // rrweb config info: https://github.com/rrweb-io/rrweb/blob/7d5d0033258d6c29599fb08412202d9a2c7b9413/src/record/index.ts#L28\n        window.rrweb.record({\n            emit: (data) => {\n                const properties = {\n                    $snapshot_data: data,\n                    $session_id: sessionIdGenerator(this.instance.persistence, data.timestamp),\n                }\n\n                this.instance._captureMetrics.incr('rrweb-record')\n                this.instance._captureMetrics.incr(`rrweb-record-${data.type}`)\n\n                if (this.emit) {\n                    this._captureSnapshot(properties)\n                } else {\n                    this.snapshots.push(properties)\n                }\n            },\n            blockClass: 'ph-no-capture', // Does not capture the element at all\n            ignoreClass: 'ph-ignore-input', // Ignores content of input but still records the input element\n        })\n\n        // :TRICKY: rrweb does not capture navigation within SPA-s, so hook into our $pageview events to get access to all events.\n        //   Dropping the initial event is fine (it's always captured by rrweb).\n        this.instance._addCaptureHook((eventName) => {\n            if (eventName === '$pageview') {\n                window.rrweb.record.addCustomEvent('$pageview', { href: window.location.href })\n            }\n        })\n    }\n\n    _captureSnapshot(properties) {\n        // :TRICKY: Make sure we batch these requests, use a custom endpoint and don't truncate the strings.\n        this.instance.capture('$snapshot', properties, {\n            transport: 'XHR',\n            method: 'POST',\n            endpoint: this.endpoint,\n            _forceCompression: true,\n            _noTruncate: true,\n            _batchKey: 'sessionRecording',\n            _metrics: {\n                rrweb_full_snapshot: properties.$snapshot_data.type === 2,\n            },\n        })\n    }\n}\n","import { loadScript } from '../autocapture-utils'\nimport { _ } from '../utils'\n\nexport class Toolbar {\n    constructor(instance) {\n        this.instance = instance\n    }\n\n    afterDecideResponse(response) {\n        const editorParams =\n            response['editorParams'] ||\n            (response['toolbarVersion'] ? { toolbarVersion: response['toolbarVersion'] } : {})\n        if (\n            response['isAuthenticated'] &&\n            editorParams['toolbarVersion'] &&\n            editorParams['toolbarVersion'].indexOf('toolbar') === 0\n        ) {\n            this._loadEditor({\n                ...editorParams,\n                apiURL: this.instance.get_config('api_host'),\n            })\n            this.instance.set_config({ debug: true })\n        }\n    }\n\n    /**\n     * To load the visual editor, we need an access token and other state. That state comes from one of three places:\n     * 1. In the URL hash params if the customer is using an old snippet\n     * 2. From session storage under the key `editorParams` if the editor was initialized on a previous page\n     */\n    maybeLoadEditor(location = window.location, localStorage = window.localStorage, history = window.history) {\n        try {\n            const stateHash = _.getHashParam(location.hash, '__posthog') || _.getHashParam(location.hash, 'state')\n            const state = stateHash ? JSON.parse(decodeURIComponent(stateHash)) : null\n            const parseFromUrl = state && (state['action'] === 'mpeditor' || state['action'] === 'ph_authorize')\n            let editorParams\n\n            if (parseFromUrl) {\n                // happens if they are initializing the editor using an old snippet\n                editorParams = state\n\n                if (editorParams && Object.keys(editorParams).length > 0) {\n                    localStorage.setItem('_postHogEditorParams', JSON.stringify(editorParams))\n\n                    if (state['desiredHash']) {\n                        // hash that was in the url before the redirect\n                        location.hash = state['desiredHash']\n                    } else if (history) {\n                        history.replaceState('', document.title, location.pathname + location.search) // completely remove hash\n                    } else {\n                        location.hash = '' // clear hash (but leaves # unfortunately)\n                    }\n                }\n            } else {\n                // get credentials from localStorage from a previous initialzation\n                editorParams = JSON.parse(localStorage.getItem('_postHogEditorParams') || '{}')\n\n                // delete \"add-action\" or other intent from editorParams, otherwise we'll have the same intent\n                // every time we open the page (e.g. you just visiting your own site an hour later)\n                delete editorParams.userIntent\n            }\n\n            editorParams['apiURL'] = this.instance.get_config('api_host')\n\n            if (editorParams['token'] && this.instance.get_config('token') === editorParams['token']) {\n                this._loadEditor(editorParams)\n                return true\n            } else {\n                return false\n            }\n        } catch (e) {\n            return false\n        }\n    }\n\n    _loadEditor(editorParams) {\n        if (!window['_postHogToolbarLoaded']) {\n            // only load the codeless event editor once, even if there are multiple instances of PostHogLib\n            window['_postHogToolbarLoaded'] = true\n            const host = editorParams['jsURL'] || editorParams['apiURL'] || this.instance.get_config('api_host')\n            const toolbarScript = 'toolbar.js'\n            const editorUrl =\n                host + (host.endsWith('/') ? '' : '/') + 'static/' + toolbarScript + '?_ts=' + new Date().getTime()\n            loadScript(editorUrl, () => {\n                window['ph_load_editor'](editorParams)\n            })\n            // Turbolinks doesn't fire an onload event but does replace the entire page, including the toolbar\n            _.register_event(window, 'turbolinks:load', () => {\n                window['_postHogToolbarLoaded'] = false\n                this._loadEditor(editorParams)\n            })\n            return true\n        }\n        return false\n    }\n}\n","import { _ } from './utils'\n\nexport class RequestQueue {\n    constructor(captureMetrics, handlePollRequest, pollInterval = 3000) {\n        this.captureMetrics = captureMetrics\n        this.handlePollRequest = handlePollRequest\n        this.isPolling = true // flag to continue to recursively poll or not\n        this._event_queue = []\n        this._empty_queue_count = 0 // to track empty polls\n        this._poller = function () {} // to become interval for reference to clear later\n        this._pollInterval = pollInterval\n    }\n\n    setPollInterval(interval) {\n        this._pollInterval = interval\n        // Reset interval if running already\n        if (this.isPolling) {\n            this.poll()\n        }\n    }\n\n    enqueue(url, data, options) {\n        this.captureMetrics.incr('batch-enqueue')\n\n        this._event_queue.push({ url, data, options })\n\n        if (!this.isPolling) {\n            this.isPolling = true\n            this.poll()\n        }\n    }\n\n    poll() {\n        clearTimeout(this._poller)\n        this._poller = setTimeout(() => {\n            if (this._event_queue.length > 0) {\n                const requests = this.formatQueue()\n                for (let key in requests) {\n                    let { url, data, options } = requests[key]\n                    _.each(data, (_, dataKey) => {\n                        data[dataKey]['offset'] = Math.abs(data[dataKey]['timestamp'] - this.getTime())\n                        delete data[dataKey]['timestamp']\n                    })\n                    this.handlePollRequest(url, data, options)\n\n                    this.captureMetrics.incr('batch-requests')\n                    this.captureMetrics.incr(`batch-requests-${url.slice(url.length - 2)}`)\n                    this.captureMetrics.incr('batch-handle', data.length)\n                    this.captureMetrics.incr(`batch-handle-${url.slice(url.length - 2)}`, data.length)\n                }\n                this._event_queue.length = 0 // flush the _event_queue\n            } else {\n                this._empty_queue_count++\n            }\n\n            /**\n             * _empty_queue_count will increment each time the queue is polled\n             *  and it is empty. To avoid empty polling (user went idle, stepped away from comp)\n             *  we can turn it off with the isPolling flag.\n             *\n             * Polling will be re enabled when the next time PostHogLib.capture is called with\n             *  an event that should be added to the event queue.\n             */\n            if (this._empty_queue_count > 4) {\n                this.isPolling = false\n                this._empty_queue_count = 0\n            }\n            if (this.isPolling) {\n                this.poll()\n            }\n        }, this._pollInterval)\n    }\n\n    updateUnloadMetrics() {\n        const requests = this.formatQueue()\n        for (let key in requests) {\n            let { url, data } = requests[key]\n\n            this.captureMetrics.incr('batch-unload-requests')\n            this.captureMetrics.incr(`batch-unload-requests-${url.slice(url.length - 2)}`)\n            this.captureMetrics.incr('batch-unload', data.length)\n            this.captureMetrics.incr(`batch-unload-${url.slice(url.length - 2)}`, data.length)\n        }\n    }\n\n    unload() {\n        clearTimeout(this._poller)\n        const requests = this._event_queue.length > 0 ? this.formatQueue() : {}\n        this._event_queue.length = 0\n        for (let url in requests) {\n            const { data, options } = requests[url]\n            this.handlePollRequest(url, data, { ...options, transport: 'sendbeacon' })\n        }\n    }\n\n    formatQueue() {\n        const requests = {}\n        _.each(this._event_queue, (request) => {\n            const { url, data, options } = request\n            const key = (options ? options._batchKey : null) || url\n            if (requests[key] === undefined) {\n                requests[key] = { data: [], url, options }\n            }\n\n            // :TRICKY: Metrics-only code\n            if (\n                options &&\n                requests[key].options &&\n                requests[key].options._metrics &&\n                !requests[key].options._metrics['rrweb_full_snapshot']\n            ) {\n                requests[key].options._metrics['rrweb_full_snapshot'] = options._metrics['rrweb_full_snapshot']\n            }\n            requests[key].data.push(data)\n        })\n        return requests\n    }\n\n    getTime() {\n        return new Date().getTime()\n    }\n}\n","import { _ } from './utils'\n\nexport class CaptureMetrics {\n    constructor(enabled, capture, getTime = () => new Date().getTime()) {\n        this.enabled = enabled\n        this.capture = capture\n        this.getTime = getTime\n        this.metrics = {}\n        this.requests = {}\n    }\n\n    incr(key, by = 1) {\n        if (this.enabled) {\n            key = `phjs-${key}`\n            this.metrics[key] = (this.metrics[key] || 0) + by\n        }\n    }\n\n    decr(key) {\n        if (this.enabled) {\n            key = `phjs-${key}`\n            this.metrics[key] = (this.metrics[key] || 0) - 1\n        }\n    }\n\n    startRequest(payload) {\n        if (this.enabled) {\n            const requestId = _.UUID()\n\n            this.requests[requestId] = [this.getTime(), payload]\n\n            return requestId\n        }\n    }\n\n    finishRequest(requestId) {\n        if (this.enabled) {\n            const [startTime, payload] = this.requests[requestId]\n            payload['duration'] = this.getTime() - startTime\n            delete this.requests[requestId]\n            return payload\n        }\n    }\n\n    markRequestFailed(payload) {\n        if (this.enabled) {\n            this.capture('$capture_failed_request', payload)\n        }\n    }\n\n    captureInProgressRequests() {\n        if (this.enabled) {\n            Object.keys(this.requests).forEach((requestId) => {\n                const payload = this.finishRequest(requestId)\n                this.markRequestFailed({ ...payload, type: 'inflight_at_unload' })\n            })\n        }\n    }\n}\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Much of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// Many optimizations have been made, so the bundle size is ultimately smaller but performance is similar.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var u = ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], { type: 'text/javascript' })));\n    var w = new Worker(u);\n    w.onerror = function (e) { cb(e.error, null); };\n    w.onmessage = function (e) { cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst && pos & 7)\n            pos = wfblk(w, pos + 1, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = 0xFFFFFFFF;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return c ^ 0xFFFFFFFF; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    if (!opts.consume)\n        dat = new u8(dat);\n    w.postMessage([dat, opts], [dat.buffer]);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16)) + (d[b + 3] << 23) * 2; };\nvar b8 = function (d, b) { return b4(d, b) | (b4(d, b) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) + (2 * (d[l - 1] << 23));\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    return dopt(data, opts, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) >> 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = gzs(this.p);\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return [r, d.slice(i - 1)];\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        if (!final)\n            final = false;\n        if (this.t)\n            return this.ondata(this.t.decode(chunk, { stream: !final }), final);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), ch = _a[0], np = _a[1];\n        if (final && np.length)\n            throw 'invalid utf-8 data';\n        this.p = np;\n        this.ondata(ch, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        this.ondata(strToU8(chunk), final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td)\n        return td.decode(dat);\n    else {\n        var _a = dutf8(dat), out = _a[0], ext = _a[1];\n        if (ext.length)\n            throw 'invalid utf-8 data';\n        return out;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce) {\n    var fl = fn.length;\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c == null && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, ((y << 24) * 2) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1)), b += 4;\n    if (c != null) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl), b += 16;\n    if (ce != null) {\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    return b + fl;\n};\n// create zip data descriptor\nvar czdd = function (f, c) {\n    var d = new u8(16);\n    wbytes(d, 0, 0x8074B50);\n    wbytes(d, 4, f.crc);\n    wbytes(d, 8, c);\n    wbytes(d, 12, f.size);\n    return d;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback - add to ZIP archive before pushing';\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (opts === void 0) { opts = {}; }\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (opts === void 0) { opts = {}; }\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this_1 = this;\n        if (this.d & 2)\n            throw 'stream finished';\n        var f = strToU8(file.filename), fl = f.length, u = fl != file.filename.length, hl = fl + 30;\n        if (fl > 65535)\n            throw 'filename too long';\n        var header = new u8(hl);\n        wzh(header, 0, file, f, u);\n        var chks = [header];\n        var pAll = function () {\n            for (var _i = 0, chks_1 = chks; _i < chks_1.length; _i++) {\n                var chk = chks_1[_i];\n                _this_1.ondata(null, chk, false);\n            }\n            chks = [];\n        };\n        var tr = this.d;\n        this.d = 0;\n        var ind = this.u.length;\n        var uf = mrg(file, {\n            f: f,\n            u: u,\n            t: function () {\n                if (file.terminate)\n                    file.terminate();\n            },\n            r: function () {\n                pAll();\n                if (tr) {\n                    var nxt = _this_1.u[ind + 1];\n                    if (nxt)\n                        nxt.r();\n                    else\n                        _this_1.d = 1;\n                }\n                tr = 1;\n            }\n        });\n        var cl = 0;\n        file.ondata = function (err, dat, final) {\n            if (err) {\n                _this_1.ondata(err, dat, final);\n                _this_1.terminate();\n            }\n            else {\n                cl += dat.length;\n                chks.push(dat);\n                if (final) {\n                    chks.push(czdd(file, cl));\n                    uf.c = cl, uf.b = hl + cl + 16, uf.crc = file.crc, uf.size = file.size;\n                    if (tr)\n                        uf.r();\n                    tr = 1;\n                }\n                else if (tr)\n                    pAll();\n            }\n        };\n        this.u.push(uf);\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this_1 = this;\n        if (this.d & 2) {\n            if (this.d & 1)\n                throw 'stream finishing';\n            throw 'stream finished';\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this_1.d & 1))\n                        return;\n                    _this_1.u.splice(-1, 1);\n                    _this_1.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length;\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, f.c, l);\n            bt += 46 + f.f.length, l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will silently fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var loc = tot + 30 + f.f.length;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot), o += 46 + f.f.length, tot = loc + l;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    u: s != fn.length,\n                    compression: compression\n                });\n                o += 30 + s + l;\n                tot += 76 + 2 * s + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl('filename too long', null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        if (s > 65535)\n            throw 'filename too long';\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            u: s != fn.length,\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + l;\n        tot += 76 + 2 * s + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        out.set(f.c, f.o + 30 + f.f.length);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o), o += 46 + f.f.length;\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this_1 = this;\n        this.i = new Inflate(function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, data, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate() {\n        var _this_1 = this;\n        this.i = new AsyncInflate(function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.terminate = this.i.terminate;\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        this.i.push(slc(data, 0), final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this_1 = this;\n        var add = this.c == -1 && this.d;\n        if (this.c && !add) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push([toAdd, !this.c]);\n            chunk = chunk.subarray(len);\n        }\n        if (add || !this.c) {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            var dl = chunk.length, pl = this.p.length, l = dl + pl;\n            if (!dl) {\n                if (!pl)\n                    return;\n                buf = this.p;\n            }\n            else if (!pl)\n                buf = chunk;\n            else {\n                buf = new Uint8Array(l);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            this.p = et;\n            var _loop_2 = function () {\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1;\n                    if (add)\n                        add.push(et, true);\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_2 = [];\n                        this_1.k.unshift(chks_2);\n                        f = 2, is = i;\n                        var sc_1 = b4(buf, i + 18);\n                        var fn = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (dd)\n                            sc_1 = -1;\n                        if (sc_1 == 4294967295)\n                            sc_1 = z64e(buf, i)[0];\n                        if (!this_1.o[cmp_1]) {\n                            this_1.onfile('unknown compression type ' + cmp_1, fn, null);\n                            return \"break\";\n                        }\n                        this_1.c = sc_1;\n                        var file_1 = {\n                            start: function () {\n                                if (!file_1.ondata)\n                                    throw 'no callback';\n                                if (!sc_1)\n                                    file_1.ondata(null, new u8(0), true);\n                                else {\n                                    var d = new _this_1.o[cmp_1]();\n                                    d.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_3 = chks_2; _i < chks_3.length; _i++) {\n                                        var _a = chks_3[_i], dat = _a[0], final_1 = _a[1];\n                                        d.push(dat, final_1);\n                                    }\n                                    if (_this_1.k[0] == chks_2)\n                                        _this_1.d = d;\n                                }\n                            },\n                            terminate: function () {\n                                if (_this_1.k[0] == chks_2 && _this_1.d.terminate)\n                                    _this_1.d.terminate();\n                            }\n                        };\n                        this_1.onfile(null, fn, file_1);\n                        i += es;\n                    }\n                    return \"break\";\n                }\n            };\n            var this_1 = this;\n            // not l - 4 because we need i to become l\n            for (; i < l; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            if (add)\n                add.push(f == 2 ? buf.subarray(0, is - 12 - (b4(buf, is - 12) == 0x8074B50 && 4)) : buf.subarray(0, i), !!f);\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            else if (f & 1)\n                this.p = buf;\n            if (final && (f || this.c))\n                throw 'invalid zip file';\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50) {\n            cb('invalid zip file', null);\n            return;\n        }\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_3 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_3(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import { LZString } from './lz-string'\nimport { strToU8, gzipSync } from 'fflate'\nimport { _ } from './utils'\n\nexport function decideCompression(compressionSupport) {\n    if (compressionSupport['gzip-js']) {\n        return 'gzip-js'\n    } else if (compressionSupport['lz64']) {\n        return 'lz64'\n    } else {\n        return 'base64'\n    }\n}\n\nexport function compressData(compression, jsonData, options) {\n    if (compression === 'lz64') {\n        return [{ data: LZString.compressToBase64(jsonData), compression: 'lz64' }, options]\n    } else if (compression === 'gzip-js') {\n        // :TRICKY: This returns an UInt8Array. We don't encode this to a string - returning a blob will do this for us.\n        return [\n            gzipSync(strToU8(jsonData), { mtime: 0 }),\n            { ...options, blob: true, urlQueryArgs: { compression: 'gzip-js' } },\n        ]\n    } else {\n        return [{ data: _.base64Encode(jsonData) }, options]\n    }\n}\n","import { _, console } from './utils'\n\nexport const encodePostData = (data, options) => {\n    if (options.blob) {\n        return new Blob([data.buffer], { type: 'text/plain' })\n    } else if (options.sendBeacon) {\n        const body = encodePostData(data, { method: 'POST' })\n        return new Blob([body], { type: 'application/x-www-form-urlencoded' })\n    } else if (options.method !== 'POST') {\n        return null\n    }\n\n    let body_data\n    if (Array.isArray(data)) {\n        body_data = 'data=' + encodeURIComponent(data)\n    } else {\n        body_data = 'data=' + encodeURIComponent(data['data'])\n    }\n\n    if (data['compression']) {\n        body_data += '&compression=' + data['compression']\n    }\n\n    return body_data\n}\n\nexport const xhr = (url, data, headers, options, captureMetrics, callback) => {\n    const req = new XMLHttpRequest()\n    req.open(options.method, url, true)\n\n    const body = encodePostData(data, options)\n\n    captureMetrics.incr('_send_request')\n    captureMetrics.incr('_send_request_inflight')\n\n    const requestId = captureMetrics.startRequest({\n        data_size: _.isString(data) ? data.length : body.length,\n        endpoint: url.slice(url.length - 2),\n        ...options._metrics,\n    })\n\n    _.each(headers, function (headerValue, headerName) {\n        req.setRequestHeader(headerName, headerValue)\n    })\n    if (options.method === 'POST' && !options.blob) {\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n    }// else if (options.blob) {\n    //     req.setRequestHeader('Content-Type', 'multipart/form-data')\n    // }\n\n    // send the ph_optout cookie\n    // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n    req.withCredentials = true\n    req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n            captureMetrics.incr(`xhr-response`)\n            captureMetrics.incr(`xhr-response-${req.status}`)\n            captureMetrics.decr('_send_request_inflight')\n\n            const data = captureMetrics.finishRequest(requestId)\n\n            // XMLHttpRequest.DONE == 4, except in safari 4\n            if (req.status === 200) {\n                if (callback) {\n                    let response\n                    try {\n                        response = JSON.parse(req.responseText)\n                    } catch (e) {\n                        console.error(e)\n                        return\n                    }\n                    callback(response)\n                }\n            } else {\n                const error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText\n                console.error(error)\n\n                captureMetrics.markRequestFailed({\n                    ...data,\n                    type: 'non_200',\n                    status: req.status,\n                    statusText: req.statusText,\n                })\n\n                if (callback) {\n                    if (options.verbose) {\n                        callback({ status: 0, error: error })\n                    } else {\n                        callback(0)\n                    }\n                }\n            }\n        }\n    }\n    req.send(body)\n}\n","/* eslint camelcase: \"off\" */\nimport { LZString } from './lz-string'\nimport Config from './config'\nimport { _, console, userAgent, window, document } from './utils'\nimport { autocapture } from './autocapture'\nimport { PostHogPeople } from './posthog-people'\nimport { PostHogFeatureFlags } from './posthog-featureflags'\nimport { PostHogPersistence, PEOPLE_DISTINCT_ID_KEY, ALIAS_ID_KEY } from './posthog-persistence'\nimport { SessionRecording } from './extensions/sessionrecording'\nimport { Toolbar } from './extensions/toolbar'\nimport { optIn, optOut, hasOptedIn, hasOptedOut, clearOptInOut, addOptOutCheckPostHogLib } from './gdpr-utils'\nimport { cookieStore, localStore } from './storage'\nimport { RequestQueue } from './request-queue'\nimport { CaptureMetrics } from './capture-metrics'\nimport { compressData, decideCompression } from './compression'\nimport { xhr, encodePostData } from './send-request'\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\nlet init_type // MODULE or SNIPPET loader\nlet posthog_master // main posthog instance / object\nconst INIT_MODULE = 0\nconst INIT_SNIPPET = 1\n// some globals for comparisons\nconst __NOOP = function () {}\nconst __NOOPTIONS = {}\n\nconst PRIMARY_INSTANCE_NAME = 'posthog'\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\nconst USE_XHR = window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nlet ENQUEUE_REQUESTS = !USE_XHR && userAgent.indexOf('MSIE') === -1 && userAgent.indexOf('Mozilla') === -1\n\nconst defaultConfig = () => ({\n    api_host: 'https://app.posthog.com',\n    api_method: 'POST',\n    api_transport: 'XHR',\n    autocapture: true,\n    rageclick: false,\n    cross_subdomain_cookie: document.location.hostname.indexOf('herokuapp.com') === -1,\n    persistence: 'cookie',\n    persistence_name: '',\n    cookie_name: '',\n    loaded: function () {},\n    store_google: true,\n    save_referrer: true,\n    test: false,\n    verbose: false,\n    img: false,\n    capture_pageview: true,\n    debug: false,\n    cookie_expiration: 365,\n    upgrade: false,\n    disable_session_recording: false,\n    disable_persistence: false,\n    disable_cookie: false,\n    secure_cookie: window.location.protocol === 'https:',\n    ip: true,\n    opt_out_capturing_by_default: false,\n    opt_out_persistence_by_default: false,\n    opt_out_capturing_persistence_type: 'localStorage',\n    opt_out_capturing_cookie_prefix: null,\n    property_blacklist: [],\n    sanitize_properties: null,\n    xhr_headers: {}, // { header: value, header2: value }\n    inapp_protocol: '//',\n    inapp_link_new_window: false,\n    request_batching: true,\n    // Used for internal testing\n    _onCapture: () => {},\n    _capture_metrics: false,\n})\n\n/**\n * PostHog Library Object\n * @constructor\n */\nexport const PostHogLib = function () {}\n\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of PostHogLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.posthog as well as any additional instances\n * declared before this file has loaded).\n */\nvar create_mplib = function (token, config, name) {\n    var instance,\n        target = name === PRIMARY_INSTANCE_NAME ? posthog_master : posthog_master[name]\n\n    if (target && init_type === INIT_MODULE) {\n        instance = target\n    } else {\n        if (target && !_.isArray(target)) {\n            console.error('You have already initialized ' + name)\n            return\n        }\n        instance = new PostHogLib()\n    }\n\n    instance._init(token, config, name)\n\n    instance['people'] = new PostHogPeople()\n    instance['people']._init(instance)\n\n    instance.featureFlags = new PostHogFeatureFlags(instance)\n    // This key is deprecated\n    instance.feature_flags = instance.featureFlags\n\n    instance.toolbar = new Toolbar(instance)\n\n    instance.sessionRecording = new SessionRecording(instance)\n    instance.sessionRecording.startRecordingIfEnabled()\n\n    // if any instance on the page has debug = true, we set the\n    // global debug to be true\n    Config.DEBUG = Config.DEBUG || instance.get_config('debug')\n\n    instance['__autocapture_enabled'] = instance.get_config('autocapture')\n    if (instance.get_config('autocapture')) {\n        var num_buckets = 100\n        var num_enabled_buckets = 100\n        if (!autocapture.enabledForProject(instance.get_config('token'), num_buckets, num_enabled_buckets)) {\n            instance['__autocapture_enabled'] = false\n            console.log('Not in active bucket: disabling Automatic Event Collection.')\n        } else if (!autocapture.isBrowserSupported()) {\n            instance['__autocapture_enabled'] = false\n            console.log('Disabling Automatic Event Collection because this browser is not supported')\n        } else {\n            autocapture.init(instance)\n        }\n    }\n\n    // if target is not defined, we called init after the lib already\n    // loaded, so there won't be an array of things to execute\n    if (!_.isUndefined(target) && _.isArray(target)) {\n        // Crunch through the people queue first - we queue this data up &\n        // flush on identify, so it's better to do all these operations first\n        instance._execute_array.call(instance['people'], target['people'])\n        instance._execute_array(target)\n    }\n\n    return instance\n}\n\n// Initialization methods\n\n/**\n * This function initializes a new instance of the PostHog capturing object.\n * All new instances are added to the main posthog object as sub properties (such as\n * posthog.library_name) and also returned by this function. To define a\n * second instance on the page, you would call:\n *\n *     posthog.init('new token', { your: 'config' }, 'library_name');\n *\n * and use it like so:\n *\n *     posthog.library_name.capture(...);\n *\n * @param {String} token   Your PostHog API token\n * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/posthog/posthog-js/blob/6e0e873/src/posthog-core.js#L57-L91\">See a list of default config options</a>.\n * @param {String} [name]    The name for the new posthog instance that you want created\n */\nPostHogLib.prototype.init = function (token, config, name) {\n    if (_.isUndefined(name)) {\n        console.error('You must name your new library: init(token, config, name)')\n        return\n    }\n    if (name === PRIMARY_INSTANCE_NAME) {\n        console.error('You must initialize the main posthog object right after you include the PostHog js snippet')\n        return\n    }\n\n    var instance = create_mplib(token, config, name)\n    posthog_master[name] = instance\n    instance._loaded()\n\n    return instance\n}\n\n// posthog._init(token:string, config:object, name:string)\n//\n// This function sets up the current instance of the posthog\n// library.  The difference between this method and the init(...)\n// method is this one initializes the actual instance, whereas the\n// init(...) method sets up a new library and calls _init on it.\n//\nPostHogLib.prototype._init = function (token, config, name) {\n    this['__loaded'] = true\n    this['config'] = {}\n    this['_triggered_notifs'] = []\n    this['compression'] = {}\n\n    this.set_config(\n        _.extend({}, defaultConfig(), config, {\n            name: name,\n            token: token,\n            callback_fn: (name === PRIMARY_INSTANCE_NAME ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc',\n        })\n    )\n\n    this['_jsc'] = function () {}\n\n    this._captureMetrics = new CaptureMetrics(this.get_config('_capture_metrics'), _.bind(this.capture, this))\n\n    this._requestQueue = new RequestQueue(this._captureMetrics, _.bind(this._handle_queued_event, this))\n    this.__captureHooks = []\n    this.__request_queue = []\n\n    this['persistence'] = new PostHogPersistence(this['config'])\n    this._gdpr_init()\n\n    var uuid = _.UUID()\n    if (!this.get_distinct_id()) {\n        // There is no need to set the distinct id\n        // or the device id if something was already stored\n        // in the persitence\n        this.register_once(\n            {\n                distinct_id: uuid,\n                $device_id: uuid,\n            },\n            ''\n        )\n    }\n    // Set up the window close event handler \"unload\"\n    window.addEventListener && window.addEventListener('unload', this._handle_unload.bind(this))\n}\n\n// Private methods\n\nPostHogLib.prototype._loaded = function () {\n    this.get_config('loaded')(this)\n\n    this._start_queue_if_opted_in()\n\n    // this happens after so a user can call identify in\n    // the loaded callback\n    if (this.get_config('capture_pageview')) {\n        this.capture_pageview()\n    }\n}\n\nPostHogLib.prototype._start_queue_if_opted_in = function () {\n    if (!this.has_opted_out_capturing()) {\n        if (this.get_config('request_batching')) {\n            this._requestQueue.poll()\n        }\n    }\n}\n\nPostHogLib.prototype._dom_loaded = function () {\n    if (!this.has_opted_out_capturing()) {\n        _.each(\n            this.__request_queue,\n            function (item) {\n                this._send_request.apply(this, item)\n            },\n            this\n        )\n    }\n\n    delete this.__request_queue\n\n    this._start_queue_if_opted_in()\n}\n\n/**\n * _prepare_callback() should be called by callers of _send_request for use\n * as the callback argument.\n *\n * If there is no callback, this returns null.\n * If we are going to make XHR/XDR requests, this returns a function.\n * If we are going to use script tags, this returns a string to use as the\n * callback GET param.\n */\nPostHogLib.prototype._prepare_callback = function (callback, data) {\n    if (_.isUndefined(callback)) {\n        return null\n    }\n\n    if (USE_XHR) {\n        var callback_function = function (response) {\n            callback(response, data)\n        }\n        return callback_function\n    } else {\n        // if the user gives us a callback, we store as a random\n        // property on this instances jsc function and update our\n        // callback string to reflect that.\n        var jsc = this['_jsc']\n        var randomized_cb = '' + Math.floor(Math.random() * 100000000)\n        var callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']'\n        jsc[randomized_cb] = function (response) {\n            delete jsc[randomized_cb]\n            callback(response, data)\n        }\n        return callback_string\n    }\n}\n\nPostHogLib.prototype._handle_unload = function () {\n    if (!this.get_config('request_batching')) {\n        if (this.get_config('capture_pageview')) {\n            this.capture('$pageleave', null, { transport: 'sendbeacon' })\n        }\n        return\n    }\n\n    if (this.get_config('capture_pageview')) {\n        this.capture('$pageleave')\n    }\n    if (this.get_config('_capture_metrics')) {\n        this._requestQueue.updateUnloadMetrics()\n        this.capture('$capture_metrics', this._captureMetrics.metrics)\n        this._captureMetrics.captureInProgressRequests()\n    }\n    this._requestQueue.unload()\n}\n\nPostHogLib.prototype._handle_queued_event = function (url, data, options) {\n    const jsonData = JSON.stringify(data)\n    this.__compress_and_send_json_request(url, jsonData, options || __NOOPTIONS, __NOOP)\n}\n\nPostHogLib.prototype.__compress_and_send_json_request = function (url, jsonData, options, callback) {\n    const [data, _options] = compressData(decideCompression(this.compression), jsonData, options)\n    this._send_request(url, data, _options, callback)\n}\n\nPostHogLib.prototype._send_request = function (url, data, options, callback) {\n    if (ENQUEUE_REQUESTS) {\n        this.__request_queue.push(arguments)\n        return\n    }\n\n    var DEFAULT_OPTIONS = {\n        method: this.get_config('api_method'),\n        transport: this.get_config('api_transport'),\n        verbose: this.get_config('verbose'),\n    }\n\n    options = _.extend(DEFAULT_OPTIONS, options || {})\n    if (!USE_XHR) {\n        options.method = 'GET'\n    }\n\n    const useSendBeacon = window.navigator.sendBeacon && options.transport.toLowerCase() === 'sendbeacon'\n    var args = options.urlQueryArgs || {}\n    args['ip'] = this.get_config('ip') ? 1 : 0\n    args['_'] = new Date().getTime().toString()\n\n    url += '?' + _.HTTPBuildQuery(args)\n\n    if (_.isObject(data) && this.get_config('img')) {\n        var img = document.createElement('img')\n        img.src = url\n        document.body.appendChild(img)\n    } else if (useSendBeacon) {\n        // beacon documentation https://w3c.github.io/beacon/\n        // beacons format the message and use the type property\n        // also no need to try catch as sendBeacon does not report errors\n        //   and is defined as best effort attempt\n        window.navigator.sendBeacon(url, encodePostData(data, { ...options, sendBeacon: true }))\n    } else if (USE_XHR) {\n        try {\n            xhr(url, data, this.get_config('xhr_headers'), options, this._captureMetrics, callback)\n        } catch (e) {\n            console.error(e)\n        }\n    } else {\n        var script = document.createElement('script')\n        script.type = 'text/javascript'\n        script.async = true\n        script.defer = true\n        script.src = url\n        var s = document.getElementsByTagName('script')[0]\n        s.parentNode.insertBefore(script, s)\n    }\n}\n\n/**\n * _execute_array() deals with processing any posthog function\n * calls that were called before the PostHog library were loaded\n * (and are thus stored in an array so they can be called later)\n *\n * Note: we fire off all the posthog function calls && user defined\n * functions BEFORE we fire off posthog capturing calls. This is so\n * identify/register/set_config calls can properly modify early\n * capturing calls.\n *\n * @param {Array} array\n */\nPostHogLib.prototype._execute_array = function (array) {\n    var fn_name,\n        alias_calls = [],\n        other_calls = [],\n        capturing_calls = []\n    _.each(\n        array,\n        function (item) {\n            if (item) {\n                fn_name = item[0]\n                if (_.isArray(fn_name)) {\n                    capturing_calls.push(item) // chained call e.g. posthog.get_group().set()\n                } else if (typeof item === 'function') {\n                    item.call(this)\n                } else if (_.isArray(item) && fn_name === 'alias') {\n                    alias_calls.push(item)\n                } else if (\n                    _.isArray(item) &&\n                    fn_name.indexOf('capture') !== -1 &&\n                    typeof this[fn_name] === 'function'\n                ) {\n                    capturing_calls.push(item)\n                } else {\n                    other_calls.push(item)\n                }\n            }\n        },\n        this\n    )\n\n    var execute = function (calls, context) {\n        _.each(\n            calls,\n            function (item) {\n                if (_.isArray(item[0])) {\n                    // chained call\n                    var caller = context\n                    _.each(item, function (call) {\n                        caller = caller[call[0]].apply(caller, call.slice(1))\n                    })\n                } else {\n                    this[item[0]].apply(this, item.slice(1))\n                }\n            },\n            context\n        )\n    }\n\n    execute(alias_calls, this)\n    execute(other_calls, this)\n    execute(capturing_calls, this)\n}\n\n/**\n * push() keeps the standard async-array-push\n * behavior around after the lib is loaded.\n * This is only useful for external integrations that\n * do not wish to rely on our convenience methods\n * (created in the snippet).\n *\n * ### Usage:\n *     posthog.push(['register', { a: 'b' }]);\n *\n * @param {Array} item A [function_name, args...] array to be executed\n */\nPostHogLib.prototype.push = function (item) {\n    this._execute_array([item])\n}\n\n/**\n * Capture an event. This is the most important and\n * frequently used PostHog function.\n *\n * ### Usage:\n *\n *     // capture an event named 'Registered'\n *     posthog.capture('Registered', {'Gender': 'Male', 'Age': 21});\n *\n *     // capture an event using navigator.sendBeacon\n *     posthog.capture('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n *\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Object} [options] Optional configuration for this capture request.\n * @param {String} [options.transport] Transport method for network request ('XHR' or 'sendBeacon').\n * @param {Function} [callback] [Deprecated] If provided, the callback function will be called after capturing the event.\n */\nPostHogLib.prototype.capture = addOptOutCheckPostHogLib(function (event_name, properties, options, callback) {\n    this._captureMetrics.incr('capture')\n    if (event_name === '$snapshot') {\n        this._captureMetrics.incr('snapshot')\n    }\n\n    if (!callback && typeof options === 'function') {\n        callback = options\n        options = null\n    }\n    options = options || __NOOPTIONS\n    var transport = options['transport'] // external API, don't minify 'transport' prop\n    if (transport) {\n        options.transport = transport // 'transport' prop name can be minified internally\n    }\n    if (typeof callback !== 'function') {\n        callback = __NOOP\n    } else {\n        window.console.warn('WARNING! Calling posthog.capture with a callback is deprecated and will be removed soon!')\n    }\n\n    if (_.isUndefined(event_name) || typeof event_name !== 'string') {\n        console.error('No event name provided to posthog.capture')\n        return\n    }\n\n    if (_.isBlockedUA(userAgent)) {\n        callback(0)\n        return\n    }\n\n    const start_timestamp = this['persistence'].remove_event_timer(event_name)\n\n    // update persistence\n    this['persistence'].update_search_keyword(document.referrer)\n\n    if (this.get_config('store_google')) {\n        this['persistence'].update_campaign_params()\n    }\n    if (this.get_config('save_referrer')) {\n        this['persistence'].update_referrer_info(document.referrer)\n    }\n\n    var data = {\n        event: event_name,\n        properties: this._calculate_event_properties(event_name, properties, start_timestamp),\n    }\n\n    if (event_name === '$identify' && options.$set) {\n        data['$set'] = options['$set']\n    }\n\n    data = _.copyAndTruncateStrings(data, options._noTruncate ? null : 255)\n    const jsonData = JSON.stringify(data)\n\n    const url = this.get_config('api_host') + (options.endpoint || '/e/')\n    const cb = this._prepare_callback(callback, data)\n\n    const has_unique_traits = callback !== __NOOP || options !== __NOOPTIONS\n\n    if (this.get_config('request_batching') && (!has_unique_traits || options._batchKey)) {\n        data['timestamp'] = new Date()\n        this._requestQueue.enqueue(url, data, options)\n    } else {\n        this.__compress_and_send_json_request(url, jsonData, options, cb)\n    }\n\n    this._invokeCaptureHooks(event_name)\n\n    return data\n})\n\nPostHogLib.prototype._addCaptureHook = function (callback) {\n    this.__captureHooks.push(callback)\n}\n\nPostHogLib.prototype._invokeCaptureHooks = function (eventName) {\n    this.config._onCapture(eventName)\n    _.each(this.__captureHooks, (callback) => callback(eventName))\n}\n\nPostHogLib.prototype._calculate_event_properties = function (event_name, event_properties, start_timestamp) {\n    // set defaults\n    let properties = event_properties || {}\n    properties['token'] = this.get_config('token')\n\n    if (event_name === '$snapshot') {\n        const persistenceProps = this.persistence.properties()\n        properties['distinct_id'] = persistenceProps.distinct_id\n        return properties\n    }\n\n    // set $duration if time_event was previously called for this event\n    if (!_.isUndefined(start_timestamp)) {\n        var duration_in_ms = new Date().getTime() - start_timestamp\n        properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3))\n    }\n\n    // note: extend writes to the first object, so lets make sure we\n    // don't write to the persistence properties object and info\n    // properties object by passing in a new object\n\n    // update properties with pageview info and super-properties\n    properties = _.extend({}, _.info.properties(), this['persistence'].properties(), properties)\n\n    var property_blacklist = this.get_config('property_blacklist')\n    if (_.isArray(property_blacklist)) {\n        _.each(property_blacklist, function (blacklisted_prop) {\n            delete properties[blacklisted_prop]\n        })\n    } else {\n        console.error('Invalid value for property_blacklist config: ' + property_blacklist)\n    }\n\n    var sanitize_properties = this.get_config('sanitize_properties')\n    if (sanitize_properties) {\n        properties = sanitize_properties(properties, event_name)\n    }\n\n    return properties\n}\n\n/**\n * Capture a page view event.\n * This function is called by default on page load unless the\n * capture_pageview configuration variable is false.\n *\n * @param {String} [page] The url of the page to record. If you don't include this, it defaults to the current url.\n * @api private\n */\nPostHogLib.prototype.capture_pageview = function (page) {\n    if (_.isUndefined(page)) {\n        page = document.location.href\n    }\n    this.capture('$pageview')\n}\n\n/**\n * Register a set of super properties, which are included with all\n * events. This will overwrite previous super property values.\n *\n * ### Usage:\n *\n *     // register 'Gender' as a super property\n *     posthog.register({'Gender': 'Female'});\n *\n *     // register several super properties when a user signs up\n *     posthog.register({\n *         'Email': 'jdoe@example.com',\n *         'Account Type': 'Free'\n *     });\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {Number} [days] How many days since the user's last visit to store the super properties\n */\nPostHogLib.prototype.register = function (props, days) {\n    this['persistence'].register(props, days)\n}\n\n/**\n * Register a set of super properties only once. This will not\n * overwrite previous super property values, unlike register().\n *\n * ### Usage:\n *\n *     // register a super property for the first time only\n *     posthog.register_once({\n *         'First Login Date': new Date().toISOString()\n *     });\n *\n * ### Notes:\n *\n * If default_value is specified, current super properties\n * with that value will be overwritten.\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n * @param {Number} [days] How many days since the users last visit to store the super properties\n */\nPostHogLib.prototype.register_once = function (props, default_value, days) {\n    this['persistence'].register_once(props, default_value, days)\n}\n\n/**\n * Delete a super property stored with the current user.\n *\n * @param {String} property The name of the super property to remove\n */\nPostHogLib.prototype.unregister = function (property) {\n    this['persistence'].unregister(property)\n}\n\nPostHogLib.prototype._register_single = function (prop, value) {\n    var props = {}\n    props[prop] = value\n    this.register(props)\n}\n\n/*\n * See if feature flag is enabled for user.\n *\n * ### Usage:\n *\n *     if(posthog.isFeatureEnabled('beta-feature')) { // do something }\n *\n * @param {Object|String} prop Key of the feature flag.\n * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n */\nPostHogLib.prototype.isFeatureEnabled = function (key, options = {}) {\n    return this.feature_flags.isFeatureEnabled(key, options)\n}\n\nPostHogLib.prototype.reloadFeatureFlags = function () {\n    return this.feature_flags.reloadFeatureFlags()\n}\n\n/*\n * Register an event listener that runs when feature flags become available or when they change.\n * If there are flags, the listener is called immediately in addition to being called on future changes.\n *\n * ### Usage:\n *\n *     posthog.onFeatureFlags(function(featureFlags) { // do something })\n *\n * @param {Function} [callback] The callback function will be called once the feature flags are ready or when they are updated.\n *                              It'll return a list of feature flags enabled for the user.\n */\nPostHogLib.prototype.onFeatureFlags = function (callback) {\n    this.persistence.addFeatureFlagsHandler(callback)\n\n    const flags = this.feature_flags.getFlags()\n    if (flags) {\n        callback(flags)\n    }\n}\n\n/**\n * Identify a user with a unique ID instead of a PostHog\n * randomly generated distinct_id. If the method is never called,\n * then unique visitors will be identified by a UUID generated\n * the first time they visit the site.\n *\n * If user properties are passed, they are also sent to posthog.\n *\n * ### Usage:\n *\n *      posthog.identify('[user unique id]')\n *      posthog.identify('[user unique id]', { email: 'john@example.com' })\n *\n * ### Notes:\n *\n * You can call this function to overwrite a previously set\n * unique ID for the current user. PostHog cannot translate\n * between IDs at this time, so when you change a user's ID\n * they will appear to be a new user.\n *\n * When used alone, posthog.identify will change the user's\n * distinct_id to the unique ID provided. When used in tandem\n * with posthog.alias, it will allow you to identify based on\n * unique ID and map that back to the original, anonymous\n * distinct_id given to the user upon her first arrival to your\n * site (thus connecting anonymous pre-signup activity to\n * post-signup activity). Though the two work together, do not\n * call identify() at the same time as alias(). Calling the two\n * at the same time can cause a race condition, so it is best\n * practice to call identify on the original, anonymous ID\n * right after you've aliased it.\n *\n * @param {String} [unique_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n * @param {Object} [userProperties] Optional: An associative array of properties to store about the user\n */\nPostHogLib.prototype.identify = function (new_distinct_id, userProperties) {\n    //if the new_distinct_id has not been set ignore the identify event\n    if (!new_distinct_id) {\n        console.error('Unique user id has not been set in posthog.identify')\n        return\n    }\n\n    this._captureMetrics.incr('identify')\n\n    var previous_distinct_id = this.get_distinct_id()\n    this.register({ $user_id: new_distinct_id })\n\n    if (!this.get_property('$device_id')) {\n        // The persisted distinct id might not actually be a device id at all\n        // it might be a distinct id of the user from before\n        var device_id = previous_distinct_id\n        this.register_once(\n            {\n                $had_persisted_distinct_id: true,\n                $device_id: device_id,\n            },\n            ''\n        )\n    }\n\n    // identify only changes the distinct id if it doesn't match either the existing or the alias;\n    // if it's new, blow away the alias as well.\n    if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n        this.unregister(ALIAS_ID_KEY)\n        this.register({ distinct_id: new_distinct_id })\n    }\n\n    // send an $identify event any time the distinct_id is changing - logic on the server\n    // will determine whether or not to do anything with it.\n    if (new_distinct_id !== previous_distinct_id) {\n        this.capture(\n            '$identify',\n            {\n                distinct_id: new_distinct_id,\n                $anon_distinct_id: previous_distinct_id,\n            },\n            { $set: userProperties || {} }\n        )\n    } else if (userProperties) {\n        this['people'].set(userProperties)\n    }\n\n    this.reloadFeatureFlags()\n}\n\n/**\n * Clears super properties and generates a new random distinct_id for this instance.\n * Useful for clearing data when a user logs out.\n */\nPostHogLib.prototype.reset = function (reset_device_id) {\n    let device_id = this.get_property('$device_id')\n    this['persistence'].clear()\n    var uuid = _.UUID()\n    this.register_once(\n        {\n            distinct_id: uuid,\n            $device_id: reset_device_id ? uuid : device_id,\n        },\n        ''\n    )\n}\n\n/**\n * Returns the current distinct id of the user. This is either the id automatically\n * generated by the library or the id that has been passed by a call to identify().\n *\n * ### Notes:\n *\n * get_distinct_id() can only be called after the PostHog library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // set distinct_id after the posthog library has loaded\n *     posthog.init('YOUR PROJECT TOKEN', {\n *         loaded: function(posthog) {\n *             distinct_id = posthog.get_distinct_id();\n *         }\n *     });\n */\nPostHogLib.prototype.get_distinct_id = function () {\n    return this.get_property('distinct_id')\n}\n\n/**\n * Create an alias, which PostHog will use to link two distinct_ids going forward (not retroactively).\n * Multiple aliases can map to the same original ID, but not vice-versa. Aliases can also be chained - the\n * following is a valid scenario:\n *\n *     posthog.alias('new_id', 'existing_id');\n *     ...\n *     posthog.alias('newer_id', 'new_id');\n *\n * If the original ID is not passed in, we will use the current distinct_id - probably the auto-generated GUID.\n *\n * ### Notes:\n *\n * The best practice is to call alias() when a unique ID is first created for a user\n * (e.g., when a user first registers for an account and provides an email address).\n * alias() should never be called more than once for a given user, except to\n * chain a newer ID to a previously new ID, as described above.\n *\n * @param {String} alias A unique identifier that you want to use for this user in the future.\n * @param {String} [original] The current identifier being used for this user.\n */\nPostHogLib.prototype.alias = function (alias, original) {\n    // If the $people_distinct_id key exists in persistence, there has been a previous\n    // posthog.people.identify() call made for this user. It is VERY BAD to make an alias with\n    // this ID, as it will duplicate users.\n    if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n        console.critical('Attempting to create alias for existing People user - aborting.')\n        return -2\n    }\n\n    var _this = this\n    if (_.isUndefined(original)) {\n        original = this.get_distinct_id()\n    }\n    if (alias !== original) {\n        this._register_single(ALIAS_ID_KEY, alias)\n        return this.capture('$create_alias', { alias: alias, distinct_id: original }, function () {\n            // Flush the people queue\n            _this.identify(alias)\n        })\n    } else {\n        console.error('alias matches current distinct_id - skipping api call.')\n        this.identify(alias)\n        return -1\n    }\n}\n\n/**\n * Update the configuration of a posthog library instance.\n *\n * The default config is:\n *\n *     {\n *       // Posthog host\n *       api_host: 'https://app.posthog.com',\n *\n *       // HTTP method for capturing requests\n *       api_method: 'POST'\n *\n *       // Automatically capture clicks, form submissions and change events\n *       autocapture: true\n *\n *       // Capture rage clicks (beta) - useful for session recording\n *       rageclick: false\n *\n *       // transport for sending requests ('XHR' or 'sendBeacon')\n *       // NB: sendBeacon should only be used for scenarios such as\n *       // page unload where a \"best-effort\" attempt to send is\n *       // acceptable; the sendBeacon API does not support callbacks\n *       // or any way to know the result of the request. PostHog\n *       // capturing via sendBeacon will not support any event-\n *       // batching or retry mechanisms.\n *       api_transport: 'XHR'\n *\n *       // super properties cookie expiration (in days)\n *       cookie_expiration: 365\n *\n *       // super properties span subdomains\n *       cross_subdomain_cookie: true\n *\n *       // debug mode\n *       debug: false\n *\n *       // if this is true, the posthog cookie or localStorage entry\n *       // will be deleted, and no user persistence will take place\n *       disable_persistence: false\n *\n *       // if this is true, PostHog will automatically determine\n *       // City, Region and Country data using the IP address of\n *       //the client\n *       ip: true\n *\n *       // opt users out of capturing by this PostHog instance by default\n *       opt_out_capturing_by_default: false\n *\n *       // opt users out of browser data storage by this PostHog instance by default\n *       opt_out_persistence_by_default: false\n *\n *       // persistence mechanism used by opt-in/opt-out methods - cookie\n *       // or localStorage - falls back to cookie if localStorage is unavailable\n *       opt_out_capturing_persistence_type: 'localStorage'\n *\n *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n *       opt_out_capturing_cookie_prefix: null\n *\n *       // type of persistent store for super properties (cookie/\n *       // localStorage) if set to 'localStorage', any existing\n *       // posthog cookie value with the same persistence_name\n *       // will be transferred to localStorage and deleted\n *       persistence: 'cookie'\n *\n *       // name for super properties persistent store\n *       persistence_name: ''\n *\n *       // names of properties/superproperties which should never\n *       // be sent with capture() calls\n *       property_blacklist: []\n *\n *       // if this is true, posthog cookies will be marked as\n *       // secure, meaning they will only be transmitted over https\n *       secure_cookie: false\n *\n *       // should we capture a page view on page load\n *       capture_pageview: true\n *\n *       // if you set upgrade to be true, the library will check for\n *       // a cookie from our old js library and import super\n *       // properties from it, then the old cookie is deleted\n *       // The upgrade config option only works in the initialization,\n *       // so make sure you set it when you create the library.\n *       upgrade: false\n *\n *       // if this is true, session recording is always disabled.\n *       disable_session_recording: false,\n *\n *       // extra HTTP request headers to set for each API request, in\n *       // the format {'Header-Name': value}\n *       xhr_headers: {}\n *\n *       // protocol for fetching in-app message resources, e.g.\n *       // 'https://' or 'http://'; defaults to '//' (which defers to the\n *       // current page's protocol)\n *       inapp_protocol: '//'\n *\n *       // whether to open in-app message link in new tab/window\n *       inapp_link_new_window: false\n *     }\n *\n *\n * @param {Object} config A dictionary of new configuration values to update\n */\nPostHogLib.prototype.set_config = function (config) {\n    if (_.isObject(config)) {\n        _.extend(this['config'], config)\n\n        if (!this.get_config('persistence_name')) {\n            this['config']['persistence_name'] = this['config']['cookie_name']\n        }\n        if (!this.get_config('disable_persistence')) {\n            this['config']['disable_persistence'] = this['config']['disable_cookie']\n        }\n\n        if (this['persistence']) {\n            this['persistence'].update_config(this['config'])\n        }\n        Config.DEBUG = Config.DEBUG || this.get_config('debug')\n    }\n}\n\n/**\n * returns the current config object for the library.\n */\nPostHogLib.prototype.get_config = function (prop_name) {\n    return this['config'][prop_name]\n}\n\n/**\n * Returns the value of the super property named property_name. If no such\n * property is set, get_property() will return the undefined value.\n *\n * ### Notes:\n *\n * get_property() can only be called after the PostHog library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // grab value for 'user_id' after the posthog library has loaded\n *     posthog.init('YOUR PROJECT TOKEN', {\n *         loaded: function(posthog) {\n *             user_id = posthog.get_property('user_id');\n *         }\n *     });\n *\n * @param {String} property_name The name of the super property you want to retrieve\n */\nPostHogLib.prototype.get_property = function (property_name) {\n    return this['persistence']['props'][property_name]\n}\n\nPostHogLib.prototype.toString = function () {\n    var name = this.get_config('name')\n    if (name !== PRIMARY_INSTANCE_NAME) {\n        name = PRIMARY_INSTANCE_NAME + '.' + name\n    }\n    return name\n}\n\n// perform some housekeeping around GDPR opt-in/out state\nPostHogLib.prototype._gdpr_init = function () {\n    var is_localStorage_requested = this.get_config('opt_out_capturing_persistence_type') === 'localStorage'\n\n    // try to convert opt-in/out cookies to localStorage if possible\n    if (is_localStorage_requested && localStore.is_supported()) {\n        if (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: 'cookie' })) {\n            this.opt_in_capturing({ enable_persistence: false })\n        }\n        if (!this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: 'cookie' })) {\n            this.opt_out_capturing({ clear_persistence: false })\n        }\n        this.clear_opt_in_out_capturing({\n            persistence_type: 'cookie',\n            enable_persistence: false,\n        })\n    }\n\n    // check whether the user has already opted out - if so, clear & disable persistence\n    if (this.has_opted_out_capturing()) {\n        this._gdpr_update_persistence({ clear_persistence: true })\n\n        // check whether we should opt out by default\n        // note: we don't clear persistence here by default since opt-out default state is often\n        //       used as an initial state while GDPR information is being collected\n    } else if (\n        !this.has_opted_in_capturing() &&\n        (this.get_config('opt_out_capturing_by_default') || cookieStore.get('ph_optout'))\n    ) {\n        cookieStore.remove('ph_optout')\n        this.opt_out_capturing({\n            clear_persistence: this.get_config('opt_out_persistence_by_default'),\n        })\n    }\n}\n\n/**\n * Enable or disable persistence based on options\n * only enable/disable if persistence is not already in this state\n * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n */\nPostHogLib.prototype._gdpr_update_persistence = function (options) {\n    var disabled\n    if (options && options['clear_persistence']) {\n        disabled = true\n    } else if (options && options['enable_persistence']) {\n        disabled = false\n    } else {\n        return\n    }\n\n    if (!this.get_config('disable_persistence') && this['persistence'].disabled !== disabled) {\n        this['persistence'].set_disabled(disabled)\n    }\n}\n\n// call a base gdpr function after constructing the appropriate token and options args\nPostHogLib.prototype._gdpr_call_func = function (func, options) {\n    options = _.extend(\n        {\n            capture: _.bind(this.capture, this),\n            persistence_type: this.get_config('opt_out_capturing_persistence_type'),\n            cookie_prefix: this.get_config('opt_out_capturing_cookie_prefix'),\n            cookie_expiration: this.get_config('cookie_expiration'),\n            cross_subdomain_cookie: this.get_config('cross_subdomain_cookie'),\n            secure_cookie: this.get_config('secure_cookie'),\n        },\n        options\n    )\n\n    // check if localStorage can be used for recording opt out status, fall back to cookie if not\n    if (!localStore.is_supported() && options['persistence_type'] === 'localStorage') {\n        options['persistence_type'] = 'cookie'\n    }\n\n    return func(this.get_config('token'), {\n        capture: options['capture'],\n        captureEventName: options['capture_event_name'],\n        captureProperties: options['capture_properties'],\n        persistenceType: options['persistence_type'],\n        persistencePrefix: options['cookie_prefix'],\n        cookieExpiration: options['cookie_expiration'],\n        crossSubdomainCookie: options['cross_subdomain_cookie'],\n        secureCookie: options['secure_cookie'],\n    })\n}\n\n/**\n * Opt the user in to data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     // opt user in\n *     posthog.opt_in_capturing();\n *\n *     // opt user in with specific event name, properties, cookie configuration\n *     posthog.opt_in_capturing({\n *         capture_event_name: 'User opted in',\n *         capture_event_properties: {\n *             'Email': 'jdoe@example.com'\n *         },\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {function} [options.capture] Function used for capturing a PostHog event to record the opt-in action (default is this PostHog instance's capture method)\n * @param {string} [options.capture_event_name=$opt_in] Event name to be used for capturing the opt-in action\n * @param {Object} [options.capture_properties] Set of properties to be captured along with the opt-in action\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n */\nPostHogLib.prototype.opt_in_capturing = function (options) {\n    options = _.extend(\n        {\n            enable_persistence: true,\n        },\n        options\n    )\n\n    this._gdpr_call_func(optIn, options)\n    this._gdpr_update_persistence(options)\n}\nPostHogLib.prototype.opt_in_captureing = function (options) {\n    deprecate_warning('opt_in_captureing')\n    this.opt_in_capturing(options)\n}\n\n/**\n * Opt the user out of data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     // opt user out\n *     posthog.opt_out_capturing();\n *\n *     // opt user out with different cookie configuration from PostHog instance\n *     posthog.opt_out_capturing({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n */\nPostHogLib.prototype.opt_out_capturing = function (options) {\n    options = _.extend(\n        {\n            clear_persistence: true,\n        },\n        options\n    )\n\n    this._gdpr_call_func(optOut, options)\n    this._gdpr_update_persistence(options)\n}\nPostHogLib.prototype.opt_out_captureing = function (options) {\n    deprecate_warning('opt_out_captureing')\n    this.opt_out_capturing(options)\n}\n\n/**\n * Check whether the user has opted in to data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     var has_opted_in = posthog.has_opted_in_capturing();\n *     // use has_opted_in value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-in status\n */\nPostHogLib.prototype.has_opted_in_capturing = function (options) {\n    return this._gdpr_call_func(hasOptedIn, options)\n}\nPostHogLib.prototype.has_opted_in_captureing = function (options) {\n    deprecate_warning('has_opted_in_captureing')\n    return this.has_opted_in_capturing(options)\n}\n\n/**\n * Check whether the user has opted out of data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     var has_opted_out = posthog.has_opted_out_capturing();\n *     // use has_opted_out value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-out status\n */\nPostHogLib.prototype.has_opted_out_capturing = function (options) {\n    return this._gdpr_call_func(hasOptedOut, options)\n}\nPostHogLib.prototype.has_opted_out_captureing = function (options) {\n    deprecate_warning('has_opted_out_captureing')\n    return this.has_opted_out_capturing(options)\n}\n\n/**\n * Clear the user's opt in/out status of data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     // clear user's opt-in/out status\n *     posthog.clear_opt_in_out_capturing();\n *\n *     // clear user's opt-in/out status with specific cookie configuration - should match\n *     // configuration used when opt_in_capturing/opt_out_capturing methods were called.\n *     posthog.clear_opt_in_out_capturing({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n */\nPostHogLib.prototype.clear_opt_in_out_capturing = function (options) {\n    options = _.extend(\n        {\n            enable_persistence: true,\n        },\n        options\n    )\n\n    this._gdpr_call_func(clearOptInOut, options)\n    this._gdpr_update_persistence(options)\n}\nPostHogLib.prototype.clear_opt_in_out_captureing = function (options) {\n    deprecate_warning('clear_opt_in_out_captureing')\n    this.clear_opt_in_out_capturing(options)\n}\n\n/**\n * Integrate Sentry with PostHog. This will add a direct link to the person in Sentry, and an $exception event in PostHog\n *\n * ### Usage\n *\n *     Sentry.init({\n *          dsn: 'https://example',\n *          integrations: [\n *              new posthog.SentryIntegration(posthog)\n *          ]\n *     })\n *\n * @param {Object} [posthog] The posthog object\n * @param {string} [organization] Optional: The Sentry organization, used to send a direct link from PostHog to Sentry\n * @param {Number} [projectId] Optional: The Sentry project id, used to send a direct link from PostHog to Sentry\n */\nPostHogLib.prototype.sentry_integration = function (_posthog, organization, projectId) {\n    // setupOnce gets called by Sentry when it intializes the plugin\n    this.setupOnce = function (addGlobalEventProcessor) {\n        addGlobalEventProcessor((event) => {\n            if (event.level !== 'error' || !_posthog.__loaded) return event\n            if (!event.tags) event.tags = {}\n            event.tags['PostHog URL'] = _posthog.config.api_host + '/person/' + _posthog.get_distinct_id()\n            let data = {\n                $sentry_event_id: event.event_id,\n                $sentry_exception: event.exception,\n            }\n            if (organization && projectId)\n                data['$sentry_url'] =\n                    'https://sentry.io/organizations/' +\n                    organization +\n                    '/issues/?project=' +\n                    projectId +\n                    '&query=' +\n                    event.event_id\n            _posthog.capture('$exception', data)\n            return event\n        })\n    }\n}\n\nfunction deprecate_warning(method) {\n    window.console.warn(\n        'WARNING! posthog.' +\n            method +\n            ' is deprecated and will be removed soon! Please use posthog.' +\n            method.split('captureing').join('capturing') +\n            ' instead (without the \"e\")!'\n    )\n}\n\nPostHogLib.prototype.decodeLZ64 = LZString.decompressFromBase64\n\n// EXPORTS (for closure compiler)\n\n// PostHogLib Exports\nPostHogLib.prototype['init'] = PostHogLib.prototype.init\nPostHogLib.prototype['reset'] = PostHogLib.prototype.reset\nPostHogLib.prototype['capture'] = PostHogLib.prototype.capture\nPostHogLib.prototype['capture_pageview'] = PostHogLib.prototype.capture_pageview\nPostHogLib.prototype['register'] = PostHogLib.prototype.register\nPostHogLib.prototype['register_once'] = PostHogLib.prototype.register_once\nPostHogLib.prototype['unregister'] = PostHogLib.prototype.unregister\nPostHogLib.prototype['identify'] = PostHogLib.prototype.identify\nPostHogLib.prototype['alias'] = PostHogLib.prototype.alias\nPostHogLib.prototype['set_config'] = PostHogLib.prototype.set_config\nPostHogLib.prototype['get_config'] = PostHogLib.prototype.get_config\nPostHogLib.prototype['get_property'] = PostHogLib.prototype.get_property\nPostHogLib.prototype['get_distinct_id'] = PostHogLib.prototype.get_distinct_id\nPostHogLib.prototype['toString'] = PostHogLib.prototype.toString\nPostHogLib.prototype['opt_out_captureing'] = PostHogLib.prototype.opt_out_captureing\nPostHogLib.prototype['opt_in_captureing'] = PostHogLib.prototype.opt_in_captureing\nPostHogLib.prototype['has_opted_out_captureing'] = PostHogLib.prototype.has_opted_out_captureing\nPostHogLib.prototype['has_opted_in_captureing'] = PostHogLib.prototype.has_opted_in_captureing\nPostHogLib.prototype['clear_opt_in_out_captureing'] = PostHogLib.prototype.clear_opt_in_out_captureing\nPostHogLib.prototype['opt_out_capturing'] = PostHogLib.prototype.opt_out_capturing\nPostHogLib.prototype['opt_in_capturing'] = PostHogLib.prototype.opt_in_capturing\nPostHogLib.prototype['has_opted_out_capturing'] = PostHogLib.prototype.has_opted_out_capturing\nPostHogLib.prototype['has_opted_in_capturing'] = PostHogLib.prototype.has_opted_in_capturing\nPostHogLib.prototype['clear_opt_in_out_capturing'] = PostHogLib.prototype.clear_opt_in_out_capturing\nPostHogLib.prototype['isFeatureEnabled'] = PostHogLib.prototype.isFeatureEnabled\nPostHogLib.prototype['reloadFeatureFlags'] = PostHogLib.prototype.reloadFeatureFlags\nPostHogLib.prototype['onFeatureFlags'] = PostHogLib.prototype.onFeatureFlags\nPostHogLib.prototype['decodeLZ64'] = PostHogLib.prototype.decodeLZ64\nPostHogLib.prototype['SentryIntegration'] = PostHogLib.prototype.sentry_integration\nPostHogLib.prototype['LIB_VERSION'] = Config.LIB_VERSION\n\n// PostHogPersistence Exports\nPostHogPersistence.prototype['properties'] = PostHogPersistence.prototype.properties\nPostHogPersistence.prototype['update_search_keyword'] = PostHogPersistence.prototype.update_search_keyword\nPostHogPersistence.prototype['update_referrer_info'] = PostHogPersistence.prototype.update_referrer_info\nPostHogPersistence.prototype['get_cross_subdomain'] = PostHogPersistence.prototype.get_cross_subdomain\nPostHogPersistence.prototype['clear'] = PostHogPersistence.prototype.clear\n\n_.safewrap_class(PostHogLib, ['identify'])\n\nvar instances = {}\nvar extend_mp = function () {\n    // add all the sub posthog instances\n    _.each(instances, function (instance, name) {\n        if (name !== PRIMARY_INSTANCE_NAME) {\n            posthog_master[name] = instance\n        }\n    })\n\n    // add private functions as _\n    posthog_master['_'] = _\n}\n\nvar override_ph_init_func = function () {\n    // we override the snippets init function to handle the case where a\n    // user initializes the posthog library after the script loads & runs\n    posthog_master['init'] = function (token, config, name) {\n        if (name) {\n            // initialize a sub library\n            if (!posthog_master[name]) {\n                posthog_master[name] = instances[name] = create_mplib(token, config, name)\n                posthog_master[name]._loaded()\n            }\n            return posthog_master[name]\n        } else {\n            var instance = posthog_master\n\n            if (instances[PRIMARY_INSTANCE_NAME]) {\n                // main posthog lib already initialized\n                instance = instances[PRIMARY_INSTANCE_NAME]\n            } else if (token) {\n                // intialize the main posthog lib\n                instance = create_mplib(token, config, PRIMARY_INSTANCE_NAME)\n                instance._loaded()\n                instances[PRIMARY_INSTANCE_NAME] = instance\n            }\n\n            posthog_master = instance\n            if (init_type === INIT_SNIPPET) {\n                window[PRIMARY_INSTANCE_NAME] = posthog_master\n            }\n            extend_mp()\n        }\n    }\n}\n\nvar add_dom_loaded_handler = function () {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if (dom_loaded_handler.done) {\n            return\n        }\n        dom_loaded_handler.done = true\n\n        ENQUEUE_REQUESTS = false\n\n        _.each(instances, function (inst) {\n            inst._dom_loaded()\n        })\n    }\n\n    function do_scroll_check() {\n        try {\n            document.documentElement.doScroll('left')\n        } catch (e) {\n            setTimeout(do_scroll_check, 1)\n            return\n        }\n\n        dom_loaded_handler()\n    }\n\n    if (document.addEventListener) {\n        if (document.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler()\n        } else {\n            document.addEventListener('DOMContentLoaded', dom_loaded_handler, false)\n        }\n    } else if (document.attachEvent) {\n        // IE\n        document.attachEvent('onreadystatechange', dom_loaded_handler)\n\n        // check to make sure we arn't in a frame\n        var toplevel = false\n        try {\n            toplevel = window.frameElement === null\n        } catch (e) {\n            // noop\n        }\n\n        if (document.documentElement.doScroll && toplevel) {\n            do_scroll_check()\n        }\n    }\n\n    // fallback handler, always will work\n    _.register_event(window, 'load', dom_loaded_handler, true)\n}\n\nexport function init_from_snippet() {\n    init_type = INIT_SNIPPET\n    if (_.isUndefined(window.posthog)) window.posthog = []\n    posthog_master = window.posthog\n\n    if (posthog_master['__loaded'] || (posthog_master['config'] && posthog_master['persistence'])) {\n        // lib has already been loaded at least once; we don't want to override the global object this time so bomb early\n        console.error('PostHog library has already been downloaded at least once.')\n        return\n    }\n    // Load instances of the PostHog Library\n    _.each(posthog_master['_i'], function (item) {\n        if (item && _.isArray(item)) {\n            instances[item[item.length - 1]] = create_mplib.apply(this, item)\n        }\n    })\n\n    override_ph_init_func()\n    posthog_master['init']()\n\n    // Fire loaded events after updating the window's posthog object\n    _.each(instances, function (instance) {\n        instance._loaded()\n    })\n\n    add_dom_loaded_handler()\n}\n\nexport function init_as_module() {\n    init_type = INIT_MODULE\n    posthog_master = new PostHogLib()\n\n    override_ph_init_func()\n    posthog_master['init']()\n    add_dom_loaded_handler()\n\n    return posthog_master\n}\n","/* eslint camelcase: \"off\" */\nimport { init_from_snippet } from './posthog-core'\n\ninit_from_snippet()\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}